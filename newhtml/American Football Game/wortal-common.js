"use strict";(self.webpackChunkWortal=self.webpackChunkWortal||[]).push([[666],{4908:(e,t,a)=>{a.d(t,{F:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{getAchievementsAsync(){o.default._log.apiCall(i.bo.ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC);const e=this.validateGetAchievements();return e.valid?(o.default._log.apiSuccess(i.bo.ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC),this.getAchievementsAsyncImpl()):(o.default._log.apiError(i.bo.ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC,e.error),Promise.reject(e.error))}unlockAchievementAsync(e){o.default._log.apiCall(i.bo.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC);const t=this.validateUnlockAchievement(e);return t.valid?(o.default._log.apiSuccess(i.bo.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC),this.unlockAchievementAsyncImpl(e)):(o.default._log.apiError(i.bo.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC,t.error),Promise.reject(t.error))}validateGetAchievements(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC,i.H$.ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC)}}validateUnlockAchievement(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC,i.H$.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC,i.H$.ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC)}}}},3162:(e,t,a)=>{a.d(t,{j:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{constructor(e){this._adConfig=e}get _internalAdConfig(){return this._adConfig}isAdBlocked(){return o.default.ads._internalAdConfig.isAdBlocked}isEnabled(){return o.default._log.apiCall(i.bo.ADS_IS_ENABLED),this.isEnabledImpl()}showBanner(e=!0,t="bottom"){o.default._log.apiCall(i.bo.ADS_SHOW_BANNER);const a=this.validateShowBanner(t);if(!a.valid)return o.default._log.apiError(i.bo.ADS_SHOW_BANNER,a.error),void o.default._log.exception("Failed to display ad.",a.error);o.default._log.apiSuccess(i.bo.ADS_SHOW_BANNER),this.showBannerImpl(e,t)}showInterstitial(e,t,a,r,l){o.default._log.apiCall(i.bo.ADS_SHOW_INTERSTITIAL);const n={beforeAd:a,afterAd:r,noFill:l||r},s=this.validateShowInterstitial(e,n);if(!s.valid)return n.noFill(),o.default._log.apiError(i.bo.ADS_SHOW_INTERSTITIAL,s.error),void o.default._log.exception("Failed to display ad.",s.error);if(this._adConfig.isAdBlocked)return o.default._log.debug("Ads are blocked, skipping.."),void n.noFill();if(!this._adConfig.isEnabled)return o.default._log.debug("Ads are disabled, skipping.."),void n.noFill();const d={adType:"interstitial",placementType:e,adUnitId:this._adConfig.interstitialId,description:t,callbacks:{beforeAd:n.beforeAd,afterAd:n.afterAd,noFill:n.noFill}};o.default._log.apiSuccess(i.bo.ADS_SHOW_INTERSTITIAL),this.showInterstitialImpl(d)}showRewarded(e,t,a,r,l,n){var s,d,_;o.default._log.apiCall(i.bo.ADS_SHOW_REWARDED);const u={beforeAd:t,afterAd:a,adDismissed:r,adViewed:l,noFill:n||a},A=this.validateShowRewarded(u);if(!A.valid)return u.noFill(),null===(s=u.adDismissed)||void 0===s||s.call(u),o.default._log.apiError(i.bo.ADS_SHOW_REWARDED,A.error),void o.default._log.exception("Failed to display ad.",A.error);if(this._adConfig.isAdBlocked)return o.default._log.debug("Ads are blocked, skipping.."),u.noFill(),void(null===(d=u.adDismissed)||void 0===d||d.call(u));if(!this._adConfig.isEnabled)return o.default._log.debug("Ads are disabled, skipping.."),u.noFill(),void(null===(_=u.adDismissed)||void 0===_||_.call(u));const c={adType:"rewarded",placementType:"reward",adUnitId:this._adConfig.rewardedId,description:e,callbacks:{beforeAd:u.beforeAd,afterAd:u.afterAd,adDismissed:u.adDismissed,adViewed:u.adViewed,noFill:u.noFill}};o.default._log.apiSuccess(i.bo.ADS_SHOW_REWARDED),this.showRewardedImpl(c)}validateShowInterstitial(e,t){const a=o.default._internalPlatform;if(!(0,l.Cu)(e))return{valid:!1,error:(0,r.CH)(`showInterstitial called with invalid placement type: ${e}`,i.bo.ADS_SHOW_INTERSTITIAL,i.H$.ADS_SHOW_INTERSTITIAL)};if("reward"===e)return{valid:!1,error:(0,r.CH)("showInterstitial called with placement type 'reward'. Call showRewarded instead to display a rewarded ad.",i.bo.ADS_SHOW_INTERSTITIAL,i.H$.ADS_SHOW_INTERSTITIAL)};return"preroll"!==e||["wortal","telegram","telegram-wortal","poki"].includes(a)?"preroll"===e&&this._adConfig.hasPrerollShown?{valid:!1,error:(0,r.CH)("Preroll ads can only be shown once during game load.",i.bo.ADS_SHOW_INTERSTITIAL,i.H$.ADS_SHOW_INTERSTITIAL)}:"link"!==a&&"viber"!==a&&"facebook"!==a||(0,l.Qh)(this._adConfig.interstitialId)?(void 0!==t.beforeAd&&"function"==typeof t.beforeAd||(t.beforeAd=()=>o.default._log.warn("beforeAd function missing or invalid. This is used to pause the game and mute audio when an ad begins.")),void 0!==t.afterAd&&"function"==typeof t.afterAd||(t.afterAd=()=>o.default._log.warn("afterAd function missing or invalid. This is used to resume the game and unmute audio when an ad has finished.")),{valid:!0}):{valid:!1,error:(0,r.CH)("Interstitial ad unit ID is missing or invalid.",i.bo.ADS_SHOW_INTERSTITIAL,i.H$.ADS_SHOW_INTERSTITIAL)}:{valid:!1,error:(0,r.CH)("Current platform does not support preroll ads.",i.bo.ADS_SHOW_INTERSTITIAL,i.H$.ADS_SHOW_INTERSTITIAL)}}validateShowRewarded(e){const t=o.default._internalPlatform;return void 0===e.adViewed||"function"!=typeof e.adViewed?{valid:!1,error:(0,r.CH)("showRewarded called with invalid adViewed callback.",i.bo.ADS_SHOW_REWARDED,i.H$.ADS_SHOW_REWARDED)}:"link"!==t&&"viber"!==t&&"facebook"!==t||(0,l.Qh)(this._adConfig.rewardedId)?(void 0!==e.beforeAd&&"function"==typeof e.beforeAd||(e.beforeAd=()=>o.default._log.warn("beforeAd function missing or invalid. This is used to pause the game and mute audio when an ad begins.")),void 0!==e.afterAd&&"function"==typeof e.afterAd||(e.afterAd=()=>o.default._log.warn("afterAd function missing or invalid. This is used to resume the game and unmute audio when an ad has finished.")),void 0!==e.adDismissed&&"function"==typeof e.adDismissed||(e.adDismissed=()=>o.default._log.warn("adDismissed function missing or invalid. This is used to handle when the player dismisses the ad.")),{valid:!0}):{valid:!1,error:(0,r.CH)("Rewarded ad unit ID is missing or invalid.",i.bo.ADS_SHOW_REWARDED,i.H$.ADS_SHOW_REWARDED)}}validateShowBanner(e){return"top"!==e&&"bottom"!==e?{valid:!1,error:(0,r.CH)(`showBanner called with invalid position: ${e}`,i.bo.ADS_SHOW_BANNER,i.H$.ADS_SHOW_BANNER)}:{valid:!0}}}},9875:(e,t,a)=>{a.r(t),a.d(t,{AdsDisabled:()=>l});var i=a(8119),r=a(6885),o=a(3162);class l extends o.j{showBannerImpl(e,t){throw(0,r.OS)(void 0,i.bo.ADS_SHOW_BANNER,i.H$.ADS_SHOW_BANNER)}showInterstitialImpl(e){throw e.callbacks.noFill(),(0,r.OS)(void 0,i.bo.ADS_SHOW_INTERSTITIAL,i.H$.ADS_SHOW_INTERSTITIAL)}showRewardedImpl(e){var t,a;throw null===(a=(t=e.callbacks).adDismissed)||void 0===a||a.call(t),e.callbacks.noFill(),(0,r.OS)(void 0,i.bo.ADS_SHOW_REWARDED,i.H$.ADS_SHOW_REWARDED)}isEnabledImpl(){return!1}}},626:(e,t,a)=>{a.r(t),a.d(t,{AdsWortal:()=>_});var i=a(6804),r=a(8119),o=a(6885),l=a(5894),n=a(5957),s=a(3423),d=a(3162);class _ extends d.j{constructor(e){super(e),this.PBJS_CONFIG={coppa:!0,pageUrl:window.location.href,deviceAccess:!0,sizeConfig:[{mediaQuery:"(min-width: 1280px)",sizesSupported:r.Km,labels:["desktop"]},{mediaQuery:"(min-width: 300px) and (max-width: 1279px)",sizesSupported:r.Eo,labels:["phone"]}],userSync:{userIds:[{name:"sharedId",storage:{name:"_sharedID",type:"cookie",expires:30}}],topics:{bidders:[{bidder:"yandex",iframeURL:"https://yandex.ru/ads/prebid/topics_frame.html"}]}},cache:{url:"https://pbs.html5gameportal.com/cache"},targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","FORMAT","SOURCE","UUID","CACHE_HOST","CACHE_PATH"],allowSendAllBidsTargetingKeys:["AD_ID","PRICE_BUCKET","SIZE","DEAL","FORMAT","SOURCE","UUID","CACHE_HOST","CACHE_PATH"]}},this._addCSSForWortalAdRendering()}showBannerImpl(e,t){throw(0,o.OS)(void 0,r.bo.ADS_SHOW_BANNER,r.H$.ADS_SHOW_BANNER)}showInterstitialImpl(e){l.default._log.debug(`Ads: Attempting to show placement: ${e.placementType} // ${e.description}`),this._adConfig.adCalled(),this._requestAd_AFG(e)}showRewardedImpl(e){l.default._log.debug(`Ads: Attempting to show placement: ${e.placementType} // ${e.description}`),this._adConfig.adCalled(),this._requestAd_AFG(e)}isEnabledImpl(){return this._adConfig.isEnabled}_requestAd_AFG(e){l.default._log.internalCall("_requestAd_AFG");const t=this._internalAdConfig;if("object"!=typeof t||!("_internalAFGConfig"in t))throw(0,o.U6)("Failed to cast to AdConfigWortal","_requestAd_AFG");if(!t._internalAFGConfig().isEnabled||t._internalAFGConfig().isDebugMode)return void this._requestBids_Prebid(e);let a=!1;const i={type:e.placementType,name:e.description,adBreakDone:t=>{var a,i;this._logAdBreakDone(t,e.placementType),null===(i=(a=e.callbacks).adBreakDone)||void 0===i||i.call(a,t),"preroll"===e.placementType&&e.callbacks.afterAd()}};"preroll"!==e.placementType&&(i.beforeAd=()=>{l.default._log.debug("Ads: Before ad called. Game should be muted and paused now."),a=!0,e.callbacks.beforeAd()},i.afterAd=()=>{l.default._log.debug("Ads: After ad called. Game should be resumed now."),this._adConfig.adShown(),this._logAdShown(e.placementType),e.callbacks.afterAd()}),"rewarded"===e.adType&&(i.adDismissed=e.callbacks.adDismissed,i.adViewed=e.callbacks.adViewed,i.beforeReward=e=>{e()}),setTimeout((()=>{a||"preroll"!==e.placementType&&(l.default._log.debug("Ads: AFG timeout. Requesting ad from Prebid."),this._requestBids_Prebid(e))}),1e3),window.adBreak(i)}_requestBids_Prebid(e){l.default._log.internalCall("_requestBids_Prebid");const t=this._internalAdConfig;if("object"!=typeof t||!("_internalPrebidConfig"in t))throw(0,o.U6)("Failed to cast to AdConfigWortal","_requestBids_Prebid");return t._internalPrebidConfig().isEnabled?t._internalPrebidConfig().isDebugMode?(l.default._log.debug("Prebid is in debug mode"),void this._requestBids_PrebidNoFillFallback(e)):t.isFrequencyCapped()&&!t._internalPrebidConfig().isDebugMode?(l.default._log.debug("Ads: Frequency capped."),void this._triggerAdNoFill(e,"frequencyCapped")):(t.resetFrequencyCap(),void window.pbjs.que.push((()=>{if(window.pbjs.setConfig(this.PBJS_CONFIG),window.pbjs.removeAdUnit(),"interstitial"===e.adType)window.pbjs.addAdUnits(t._internalPrebidConfig().interstitial);else{if("rewarded"!==e.adType)throw(0,o.U6)(`Invalid ad type passed. Expected: [interstitial, rewarded]. Actual: [${e.adType}]`,"_requestBids_Prebid");window.pbjs.addAdUnits(t._internalPrebidConfig().rewarded)}let a;t._internalPrebidConfig().isDebugMode?a=()=>{l.default._log.debug("Ads: Bids received. Requesting ad from sandbox."),this._requestAd_Sandbox(e)}:(l.default._log.debug("Ads: Bids received. Requesting ad from Aqua."),a=()=>{this._requestAd_Aqua(e)}),l.default._log.debug("Ads: Requesting bids for ad.."),window.pbjs.requestBids({bidsBackHandler:a,timeout:t._internalPrebidConfig().timeout})}))):(l.default._log.debug("Prebid is not enabled"),void this._callInHouseAd(t,e))}_requestBids_PrebidNoFillFallback(e){l.default._log.internalCall("_requestBids_PrebidNoFillFallback");const t=this._internalAdConfig;if("object"!=typeof t||!("_internalPrebidConfig"in t))throw(0,o.U6)("Failed to cast to AdConfigWortal","_requestBids_PrebidNoFillFallback");if(!t._internalPrebidNoFillFallbackConfig().isEnabled)return l.default._log.debug("Prebid is not enabled"),void this._triggerAdNoFill(e,"notReady");window.pbjs.que.push((()=>{if(window.pbjs.setConfig(this.PBJS_CONFIG),window.pbjs.removeAdUnit(),"interstitial"===e.adType)window.pbjs.addAdUnits(t._internalPrebidNoFillFallbackConfig().interstitial);else{if("rewarded"!==e.adType)throw(0,o.U6)(`Invalid ad type passed. Expected: [interstitial, rewarded]. Actual: [${e.adType}]`,"_requestBids_PrebidNoFillFallback");window.pbjs.addAdUnits(t._internalPrebidNoFillFallbackConfig().rewarded)}l.default._log.debug("Ads: Requesting no fill fallback bids for ad.."),window.pbjs.requestBids({bidsBackHandler:()=>{l.default._log.debug("Ads: Bids received. Requesting ad from sandbox."),this._requestAd_Prebid_Fallback(e)},timeout:t._internalPrebidNoFillFallbackConfig().timeout})}))}_requestAd_Prebid_Fallback(e){l.default._log.internalCall("_requestAd_Prebid_Fallback");const t=window.pbjs.getHighestCpmBids();Array.isArray(t)&&t.length>0?this._renderAd_Sandbox(t[0],e):this._triggerAdNoFill(e)}_requestAd_Aqua(e){var t;l.default._log.internalCall("_requestAd_Aqua");const a=this._internalAdConfig;if("object"!=typeof a||!("_internalAquaConfig"in a))throw(0,o.U6)("Failed to cast to AdConfigWortal","_requestAd_Aqua");if(!a._internalAquaConfig().isEnabled)throw(0,o.U6)("Aqua is not enabled","_requestAd_Aqua");let i,r;if("interstitial"===e.adType)i=a._internalAquaConfig().interstitial;else{if("rewarded"!==e.adType)throw(0,o.U6)(`Invalid ad type passed. Expected: [interstitial, rewarded]. Actual: [${e.adType}]`,"_requestAd_Aqua");i=a._internalAquaConfig().rewarded}const n=window.pbjs.getHighestCpmBids(i.slotID);if(!(Array.isArray(n)&&n.length>0))return l.default._log.debug("No winning bid for prebid. Call in house ad..."),void this._callInHouseAd(a,e);this._renderAd_Aqua(i.slotID,e),r=this._refreshAdSlot(i.slotID,i.settings.id,i.settings.zoneId),null===(t=document.getElementById(i.slotID))||void 0===t||t.appendChild(r);const s=n[0],d=s.adserverTargeting;for(const e in d)null==r||r.setAttribute(`data-revive-${e}`,d[e]);l.default.analytics._logWinningBid(s.adUnitCode,s.bidderCode,s.cpm,s.size),e.callbacks.beforeAd(),window.reviveAsync[i.settings.id].refresh()}_requestAd_Sandbox(e){l.default._log.internalCall("_requestAd_Sandbox");const t=window.pbjs.getHighestCpmBids();Array.isArray(t)&&t.length>0?this._renderAd_Sandbox(t[0],e):this._triggerAdNoFill(e)}_triggerAdNoFill(e,t="other"){l.default._log.debug(`Ads: Ad did not show. Reason: ${t}`),e.callbacks.noFill(),this._triggerAdBreakDone(e,t)}_triggerAdBreakDone(e,t="other"){if("function"!=typeof e.callbacks.adBreakDone)return;l.default._log.internalCall("_triggerAdBreakDone");const a={breakFormat:e.adType,breakStatus:t,breakType:e.placementType,breakName:e.description};l.default._log.debug("Ads: AdBreakDone",a),e.callbacks.adBreakDone(a)}_callInHouseAd(e,t){e.inHouseAdConfig.isEnabled?"interstitial"==t.adType?(0,n.o)(e.inHouseAdConfig.interstitial.settings.zoneId,t,5):(0,n.o)(e.inHouseAdConfig.rewarded.settings.zoneId,t,5):this._triggerAdNoFill(t)}_renderAd_Aqua(e,t){l.default._log.internalCall("_renderAd_Aqua"),this._createAdPlaceholder(e),this._displayCloseButton(e);const a=document.getElementById(`ad-close-${e}`);if(!a)throw(0,o.U6)(`Close button was not found for: ${e}`,"_renderAd_Aqua");a.addEventListener("click",(()=>{var a,i;l.default._log.debug("Ads: Ad closed"),this._destroyAdPlaceholder(e),t.callbacks.afterAd(),null===(i=(a=t.callbacks).adViewed)||void 0===i||i.call(a),this._triggerAdBreakDone(t,"viewed")}))}_renderAd_Sandbox(e,t){var a;if(l.default._log.internalCall("_renderAd_Sandbox"),"object"!=typeof e||void 0===e.adId||!(0,s.Qh)(e.adId))return l.default._log.warn("Ads: No ad fill. Call to _renderAd_Sandbox was made without a winning bid."),void this._triggerAdNoFill(t);const i=this._internalAdConfig;if("object"!=typeof i||!("_internalPrebidConfig"in i))throw(0,o.U6)("Failed to cast to AdConfigWortal","_renderAd_Sandbox");e.adUnitCode===i._internalAquaConfig().interstitial.slotID&&i.resetFrequencyCap(),t.callbacks.beforeAd();const r=this._createAdPlaceholder(e.adUnitCode);this._toggleAdFullScreen(e.adUnitCode);const n=this._createAdIFrame(e.adUnitCode);r.appendChild(n);const d=null===(a=n.contentWindow)||void 0===a?void 0:a.document;if(!d)throw(0,o.U6)("Failed to create iframe for ad.","_renderAd_Sandbox");window.pbjs.renderAd(d,e.adId);const _=d.createElement("style");_.appendChild(d.createTextNode("/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */button,hr,input{overflow:visible}progress,sub,sup{vertical-align:baseline}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}details,main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}fieldset{padding:.35em .75em .625em}legend{color:inherit;display:table;max-width:100%;white-space:normal}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}[hidden],template{display:none}")),d.head.appendChild(_),this._displayCloseButton(e.adUnitCode);const u=document.getElementById(`ad-close-${e.adUnitCode}`);if(!u)throw(0,o.U6)(`Close button was not found for: ${e.adUnitCode}`,"_renderAd_Sandbox");u.addEventListener("click",(()=>{var a,i;l.default._log.debug("Ads: Ad closed."),this._destroyAdPlaceholder(e.adUnitCode),null===(i=(a=t.callbacks).adViewed)||void 0===i||i.call(a),t.callbacks.afterAd(),this._triggerAdBreakDone(t,"viewed")}))}_addCSSForWortalAdRendering(){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",r.Oj.WORTAL_CSS),document.head.appendChild(e)}_createAdSlot(e,t,a){if(l.default._log.internalCall("_createAdSlot"),!(0,s.Qh)(e))throw(0,o.U6)("Invalid ad slot ID","_createAdSlot");if(!(0,s.Qh)(t))throw(0,o.U6)("Invalid ad ID","_createAdSlot");if(!(0,s.Qh)(a))throw(0,o.U6)("Invalid ad zone ID","_createAdSlot");const i=document.createElement("ins");return i.setAttribute("data-id",e),i.setAttribute("data-revive-id",t),i.setAttribute("data-revive-zoneid",a),i}_refreshAdSlot(e,t,a){if(l.default._log.internalCall("_refreshAdSlot"),!(0,s.Qh)(e))throw(0,o.U6)("Invalid ad slot ID","_refreshAdSlot");if(!(0,s.Qh)(t))throw(0,o.U6)("Invalid ad ID","_refreshAdSlot");if(!(0,s.Qh)(a))throw(0,o.U6)("Invalid ad zone ID","_refreshAdSlot");let i=document.querySelector(`[data-id="${e}"]`);return i&&i.remove(),i=this._createAdSlot(e,t,a),i}_createAdPlaceholder(e){l.default._log.internalCall("_createAdPlaceholder");const t=document.createElement("div");t.classList.add("wortal-ad-placeholder"),t.id=`ad-screen-placeholder-${e}`,t.style.display="block";const a=document.createElement("span");a.classList.add("wortal-ad-close"),a.id=`ad-close-${e}`,a.textContent="Ã—";const i=document.createElement("div");return i.classList.add("wortal-ad-body"),i.id=e,t.appendChild(a),t.appendChild(i),document.body.appendChild(t),i}_createAdIFrame(e){const t=document.createElement("iframe");return t.name=`prebid_ads_iframe_${e}`,t.title="3rd party ad content",t.setAttribute("aria-label","Advertisement"),t.style.setProperty("border","0"),t.style.setProperty("margin","0"),t.style.setProperty("background","rgba(175, 175, 175, 0.8)"),t.sandbox.add("allow-forms","allow-popups","allow-popups-to-escape-sandbox","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"),t}_toggleAdFullScreen(e){l.default._log.internalCall("_toggleAdFullScreen");const t=document.getElementById(`ad-screen-placeholder-${e}`);t||(0,o.U6)(`Ad placeholder not found for slot ID: ${e}`,"_toggleAdFullScreen"),null==t||t.classList.add("fullscreen")}_destroyAdPlaceholder(e){l.default._log.internalCall("_destroyAdPlaceholder");const t=document.getElementById(`ad-screen-placeholder-${e}`);t||(0,o.U6)(`Ad placeholder not found for slot ID: ${e}`,"_destroyAdPlaceholder"),null==t||t.remove()}_displayCloseButton(e){l.default._log.internalCall("_displayCloseButton");const t=document.getElementById(`ad-close-${e}`);if(!t)throw(0,o.U6)(`Close button was not found for: ${e}`,"_displayCloseButton");setTimeout((()=>{null==t||t.classList.add("block")}),4e3)}_logAdBreakDone(e,t){l.default._log.debug("Placement info",e);new i.B({name:"AdBreakDone",features:{client_id:"",host_channel_id:"",host_id:"",session_id:"",placementType:t,breakFormat:e.breakFormat,breakStatus:e.breakStatus}}).send()}_logAdShown(e){new i.B({name:"AdShown",features:{client_id:"",host_channel_id:"",host_id:"",session_id:window.wortalSessionId,placementType:e}}).send()}}},9274:(e,t,a)=>{a.d(t,{h:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{logGameChoice(e,t){o.default._log.apiCall(i.bo.ANALYTICS_LOG_GAME_CHOICE);const a=this.validateLogGameChoice(e,t);if(!a.valid)throw a.error;this.logGameChoiceImpl(e,t)}logLevelEnd(e,t,a){o.default._log.apiCall(i.bo.ANALYTICS_LOG_LEVEL_END);const r=this.validateLogLevelEnd(e,t,a);if(!r.valid)throw r.error;"number"==typeof e&&(e=e.toString()),o.default.session._internalGameState.clearLevelTimerHandle(),o.default.session._internalGameState.levelName!==e&&o.default.session._internalGameState.resetLevelTimer(),this.logLevelEndImpl(e,t,a)}logLevelStart(e){o.default._log.apiCall(i.bo.ANALYTICS_LOG_LEVEL_START);const t=this.validateLogLevelStart(e);if(!t.valid)throw t.error;"number"==typeof e&&(e=e.toString()),o.default.session._internalGameState.setLevelName(e),o.default.session._internalGameState.clearLevelTimerHandle(),o.default.session._internalGameState.resetLevelTimer(),o.default.session._internalGameState.startLevelTimer(),this.logLevelStartImpl(e)}logLevelUp(e){o.default._log.apiCall(i.bo.ANALYTICS_LOG_LEVEL_UP);const t=this.validateLogLevelUp(e);if(!t.valid)throw t.error;this.logLevelUpImpl(e)}logPurchase(e,t){o.default._log.apiCall(i.bo.ANALYTICS_LOG_PURCHASE);const a=this.validateLogPurchase(e,t);if(!a.valid)throw a.error;this.logPurchaseImpl(e,t)}logPurchaseSubscription(e,t){o.default._log.apiCall(i.bo.ANALYTICS_LOG_PURCHASE_SUBSCRIPTION);const a=this.validateLogPurchaseSubscription(e,t);if(!a.valid)throw a.error;this.logPurchaseSubscriptionImpl(e,t)}logScore(e){o.default._log.apiCall(i.bo.ANALYTICS_LOG_SCORE);const t=this.validateLogScore(e);if(!t.valid)throw t.error;this.logScoreImpl(e)}logSocialInvite(e){o.default._log.apiCall(i.bo.ANALYTICS_LOG_SOCIAL_INVITE);const t=this.validateLogSocialInvite(e);if(!t.valid)throw t.error;this.logSocialInviteImpl(e)}logSocialShare(e){o.default._log.apiCall(i.bo.ANALYTICS_LOG_SOCIAL_SHARE);const t=this.validateLogSocialShare(e);if(!t.valid)throw t.error;this.logSocialShareImpl(e)}logTutorialEnd(e="Tutorial",t=!0){o.default._log.apiCall(i.bo.ANALYTICS_LOG_TUTORIAL_END);const a=this.validateLogTutorialEnd(e,t);if(!a.valid)throw a.error;o.default.session._internalGameState.clearLevelTimerHandle(),o.default.session._internalGameState.levelName!==e&&o.default.session._internalGameState.resetLevelTimer(),this.logTutorialEndImpl(e,t)}logTutorialStart(e="Tutorial"){o.default._log.apiCall(i.bo.ANALYTICS_LOG_TUTORIAL_START);const t=this.validateLogTutorialStart(e);if(!t.valid)throw t.error;o.default.session._internalGameState.setLevelName(e),o.default.session._internalGameState.clearLevelTimerHandle(),o.default.session._internalGameState.resetLevelTimer(),o.default.session._internalGameState.startLevelTimer(),this.logTutorialStartImpl(e)}_logGameEnd(){return this._logGameEndImpl()}_logGameStart(){this._logGameStartImpl()}_logTrafficSource(){this._logTrafficSourceImpl()}_logAdCall(e,t,a,i){this._logAdCallImpl(e,t,a,i)}_logQueuedEvent(e){return this._logQueuedEventImpl(e)}_logError(e){this._logErrorImpl(e)}_logWinningBid(e,t,a,i){this._logWinningBidImpl(e,t,a,i)}validateLogGameChoice(e,t){return(0,l.Qh)(e)&&(0,l.Qh)(t)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_GAME_CHOICE,i.H$.ANALYTICS_LOG_GAME_CHOICE)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_GAME_CHOICE,i.H$.ANALYTICS_LOG_GAME_CHOICE)}}validateLogLevelEnd(e,t,a){return((0,l.Qh)(e)||(0,l.gf)(e))&&((0,l.Qh)(t)||(0,l.gf)(t))?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_LEVEL_END,i.H$.ANALYTICS_LOG_LEVEL_END)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_LEVEL_END,i.H$.ANALYTICS_LOG_LEVEL_END)}}validateLogLevelStart(e){return(0,l.Qh)(e)||(0,l.gf)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_LEVEL_START,i.H$.ANALYTICS_LOG_LEVEL_START)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_LEVEL_START,i.H$.ANALYTICS_LOG_LEVEL_START)}}validateLogLevelUp(e){return(0,l.Qh)(e)||(0,l.gf)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_LEVEL_UP,i.H$.ANALYTICS_LOG_LEVEL_UP)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_LEVEL_UP,i.H$.ANALYTICS_LOG_LEVEL_UP)}}validateLogPurchase(e,t){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_PURCHASE,i.H$.ANALYTICS_LOG_PURCHASE)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_PURCHASE,i.H$.ANALYTICS_LOG_PURCHASE)}}validateLogPurchaseSubscription(e,t){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_PURCHASE_SUBSCRIPTION,i.H$.ANALYTICS_LOG_PURCHASE_SUBSCRIPTION)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_PURCHASE_SUBSCRIPTION,i.H$.ANALYTICS_LOG_PURCHASE_SUBSCRIPTION)}}validateLogScore(e){return(0,l.Qh)(e)||(0,l.gf)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_SCORE,i.H$.ANALYTICS_LOG_SCORE)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_SCORE,i.H$.ANALYTICS_LOG_SCORE)}}validateLogSocialInvite(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_SOCIAL_INVITE,i.H$.ANALYTICS_LOG_SOCIAL_INVITE)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_SOCIAL_INVITE,i.H$.ANALYTICS_LOG_SOCIAL_INVITE)}}validateLogSocialShare(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_SOCIAL_SHARE,i.H$.ANALYTICS_LOG_SOCIAL_SHARE)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.ANALYTICS_LOG_SOCIAL_SHARE,i.H$.ANALYTICS_LOG_SOCIAL_SHARE)}}validateLogTutorialEnd(e,t){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_TUTORIAL_END,i.H$.ANALYTICS_LOG_TUTORIAL_END)}}validateLogTutorialStart(e){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.ANALYTICS_LOG_TUTORIAL_START,i.H$.ANALYTICS_LOG_TUTORIAL_START)}}}},6804:(e,t,a)=>{a.d(t,{B:()=>r});var i=a(5894);class r{constructor(e){this._data={name:e.name,features:e.features}}send(){i.default._log.debug("Sending analytics event to Wombat",this._data);const e=this._data.name,t=this._data.features;return navigator.sendBeacon("https://wombat.digitalwill.co.jp/wortal/events",JSON.stringify({name:e,features:t}))}}},5215:(e,t,a)=>{a.r(t),a.d(t,{AnalyticsDisabled:()=>r});var i=a(9274);class r extends i.h{logGameChoiceImpl(e,t){}logLevelEndImpl(e,t,a){}logLevelStartImpl(e){}logLevelUpImpl(e){}logPurchaseImpl(e,t){}logPurchaseSubscriptionImpl(e,t){}logScoreImpl(e){}logSocialInviteImpl(e){}logSocialShareImpl(e){}logTutorialEndImpl(e,t){}logTutorialStartImpl(e){}_logGameEndImpl(){return!0}_logGameStartImpl(){}_logTrafficSourceImpl(){}_logAdCallImpl(e,t,a,i){}_logQueuedEventImpl(e){return!0}_logErrorImpl(e){}_logWinningBidImpl(e,t,a,i){}}},1135:(e,t,a)=>{a.r(t),a.d(t,{AnalyticsWombat:()=>l});var i=a(5894),r=a(9274),o=a(6804);class l extends r.h{logGameChoiceImpl(e,t){const a={name:"GameChoice",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,decision:e,choice:t}};new o.B(a).send()}logLevelEndImpl(e,t,a){const r={name:"LevelEnd",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,level:e,score:t,wasCompleted:a,time:i.default.session._internalGameState.levelTimer}};new o.B(r).send()}logLevelStartImpl(e){const t={name:"LevelStart",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,level:e}};new o.B(t).send()}logLevelUpImpl(e){const t={name:"LevelUp",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,level:e}};new o.B(t).send()}logPurchaseImpl(e,t){const a={name:"Purchase",features:Object.assign({game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,source:i.default.session._internalSession.source,productID:e},t&&{details:t})};new o.B(a).send()}logPurchaseSubscriptionImpl(e,t){const a={name:"PurchaseSubscription",features:Object.assign({game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,source:i.default.session._internalSession.source,productID:e},t&&{details:t})};new o.B(a).send()}logScoreImpl(e){const t={name:"PostScore",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,score:e}};new o.B(t).send()}logSocialInviteImpl(e){const t={name:"SocialInvite",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,placement:e}};new o.B(t).send()}logSocialShareImpl(e){const t={name:"SocialShare",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,placement:e}};new o.B(t).send()}logTutorialEndImpl(e,t){const a={name:"TutorialEnd",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,tutorial:e,wasCompleted:t,time:i.default.session._internalGameState.levelTimer}};new o.B(a).send()}logTutorialStartImpl(e){const t={name:"TutorialStart",features:{game:i.default.session._internalSession.gameID,player:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,tutorial:e}};new o.B(t).send()}_logGameEndImpl(){const e={name:"GameEnd",features:{sessionID:i.default.session._internalSession.sessionID,playerID:i.default.player._internalPlayer.id,gameID:i.default.session._internalSession.gameID,timePlayed:i.default.session._internalSession.timePlayed,platform:i.default._internalPlatform,adsCalled:i.default.ads._internalAdConfig.adsCalled,adsShown:i.default.ads._internalAdConfig.adsShown,isLoggedIn:i.default._internalAuth.isLoggedIn,source:i.default.session._internalSession.source,sdk:"2.9.8"}};return new o.B(e).send()}_logGameStartImpl(){const e={name:"GameStart",features:{sessionID:i.default.session._internalSession.sessionID,playerID:i.default.player._internalPlayer.id,gameID:i.default.session._internalSession.gameID,browser:i.default.session._internalSession.browser,platform:i.default._internalPlatform,country:i.default.session._internalSession.country,isFirstPlay:i.default.player._internalPlayer.isFirstPlay,daysSinceFirstPlay:i.default.player._internalPlayer.daysSinceFirstPlay,isAdBlocked:i.default.ads._internalAdConfig.isAdBlocked,loadTime:i.default.session._internalGameState.gameLoadTimer,isLoggedIn:i.default._internalAuth.isLoggedIn,source:i.default.session._internalSession.source,sdk:"2.9.8"}};new o.B(e).send()}_logTrafficSourceImpl(){"viber"===i.default._internalPlatform||i.default._internalPlatform}_logAdCallImpl(e,t,a,r){const l={name:"AdCall",features:{format:e,placement:t,platform:i.default._internalPlatform,success:a,viewedRewarded:r,playerID:i.default.player._internalPlayer.id,gameID:i.default.session._internalSession.gameID,playTimeAtCall:i.default.session._internalSession.timePlayed}};new o.B(l).send()}_logQueuedEventImpl(e){return new o.B(e).send()}_logErrorImpl(e){const t={name:"GameError",features:{gameID:i.default.session._internalSession.gameID,playerID:i.default.player._internalPlayer.id,platform:i.default._internalPlatform,browser:i.default.session._internalSession.browser,errorCode:e.code,errorMessage:e.message,stackTrace:e.context,sdkVersion:"2.9.8"}};new o.B(t).send()}_logWinningBidImpl(e,t,a,r){const l={name:"WinningBid",features:{adUnitCode:e,platform:i.default._internalPlatform,bidderCode:t,adType:"ingame",cpm:a,size:r,source:i.default.session._internalSession.source,gameID:i.default.session._internalSession.gameID,country:i.default.session._internalSession.country}};new o.B(l).send()}}},8486:(e,t,a)=>{a.d(t,{_:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{chooseAsync(e){o.default._log.apiCall(i.bo.CONTEXT_CHOOSE_ASYNC);const t=this.validateChooseAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_CHOOSE_ASYNC),this.chooseAsyncImpl(e)):(o.default._log.apiError(i.bo.CONTEXT_CHOOSE_ASYNC,t.error),Promise.reject(t.error))}createAsync(e){o.default._log.apiCall(i.bo.CONTEXT_CREATE_ASYNC);const t=this.validateCreateAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_CREATE_ASYNC),this.createAsyncImpl(e)):(o.default._log.apiError(i.bo.CONTEXT_CREATE_ASYNC,t.error),Promise.reject(t.error))}getId(){o.default._log.apiCall(i.bo.CONTEXT_GET_ID);const e=this.validateGetId();if(!e.valid)throw o.default._log.apiError(i.bo.CONTEXT_GET_ID,e.error),e.error;return o.default._log.apiSuccess(i.bo.CONTEXT_GET_ID),this.getIdImpl()}getPlayersAsync(){o.default._log.apiCall(i.bo.CONTEXT_GET_PLAYERS_ASYNC);const e=this.validateGetPlayersAsync();return e.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_GET_PLAYERS_ASYNC),this.getPlayersAsyncImpl()):(o.default._log.apiError(i.bo.CONTEXT_GET_PLAYERS_ASYNC,e.error),Promise.reject(e.error))}getType(){o.default._log.apiCall(i.bo.CONTEXT_GET_TYPE);const e=this.validateGetType();if(!e.valid)throw o.default._log.apiError(i.bo.CONTEXT_GET_TYPE,e.error),e.error;return o.default._log.apiSuccess(i.bo.CONTEXT_GET_TYPE),this.getTypeImpl()}inviteAsync(e){o.default._log.apiCall(i.bo.CONTEXT_INVITE_ASYNC);const t=this.validateInviteAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_INVITE_ASYNC),this.inviteAsyncImpl(e)):(o.default._log.apiError(i.bo.CONTEXT_INVITE_ASYNC,t.error),Promise.reject(t.error))}isSizeBetween(e,t){o.default._log.apiCall(i.bo.CONTEXT_IS_SIZE_BETWEEN);const a=this.validateIsSizeBetween(e,t);if(!a.valid)throw o.default._log.apiError(i.bo.CONTEXT_IS_SIZE_BETWEEN,a.error),a.error;return o.default._log.apiSuccess(i.bo.CONTEXT_IS_SIZE_BETWEEN),this.isSizeBetweenImpl(e,t)}shareAsync(e){o.default._log.apiCall(i.bo.CONTEXT_SHARE_ASYNC);const t=this.validateShareAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_SHARE_ASYNC),this.shareAsyncImpl(e)):(o.default._log.apiError(i.bo.CONTEXT_SHARE_ASYNC,t.error),Promise.reject(t.error))}shareLinkAsync(e){o.default._log.apiCall(i.bo.CONTEXT_SHARE_LINK_ASYNC);const t=this.validateShareLinkAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_SHARE_LINK_ASYNC),this.shareLinkAsyncImpl(e)):(o.default._log.apiError(i.bo.CONTEXT_SHARE_LINK_ASYNC,t.error),Promise.reject(t.error))}switchAsync(e,t){o.default._log.apiCall(i.bo.CONTEXT_SWITCH_ASYNC);const a=this.validateSwitchAsync(e,t);return a.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_SWITCH_ASYNC),this.switchAsyncImpl(e,t)):(o.default._log.apiError(i.bo.CONTEXT_SWITCH_ASYNC,a.error),Promise.reject(a.error))}updateAsync(e){o.default._log.apiCall(i.bo.CONTEXT_UPDATE_ASYNC);const t=this.validateUpdateAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.CONTEXT_UPDATE_ASYNC),this.updateAsyncImpl(e)):(o.default._log.apiError(i.bo.CONTEXT_UPDATE_ASYNC,t.error),Promise.reject(t.error))}validateChooseAsync(e){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_CHOOSE_ASYNC,i.H$.CONTEXT_CHOOSE_ASYNC)}}validateCreateAsync(e){return"facebook"===o.default._internalPlatform?{valid:!0}:(Array.isArray(e)&&(e=e[0]),(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_CREATE_ASYNC,i.H$.CONTEXT_CREATE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.CONTEXT_CREATE_ASYNC,i.H$.CONTEXT_CREATE_ASYNC)})}validateGetId(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_GET_ID,i.H$.CONTEXT_GET_ID)}}validateGetPlayersAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_GET_PLAYERS_ASYNC,i.H$.CONTEXT_GET_PLAYERS_ASYNC)}}validateGetType(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_GET_TYPE,i.H$.CONTEXT_GET_TYPE)}}validateInviteAsync(e){return(0,l.GX)(e.text)&&(0,l.GZ)(e.image)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_INVITE_ASYNC,i.H$.CONTEXT_INVITE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.CONTEXT_INVITE_ASYNC,i.H$.CONTEXT_INVITE_ASYNC)}}validateIsSizeBetween(e,t){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_IS_SIZE_BETWEEN,i.H$.CONTEXT_IS_SIZE_BETWEEN)}}validateShareAsync(e){return(0,l.GX)(e.text)&&(0,l.GZ)(e.image)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_SHARE_ASYNC,i.H$.CONTEXT_SHARE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.CONTEXT_SHARE_ASYNC,i.H$.CONTEXT_SHARE_ASYNC)}}validateShareLinkAsync(e){return void 0===e.data?{valid:!1,error:(0,r.CH)(void 0,i.bo.CONTEXT_SHARE_LINK_ASYNC,i.H$.CONTEXT_SHARE_LINK_ASYNC)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_SHARE_LINK_ASYNC,i.H$.CONTEXT_SHARE_LINK_ASYNC)}}validateSwitchAsync(e,t){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_SWITCH_ASYNC,i.H$.CONTEXT_SWITCH_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.CONTEXT_SWITCH_ASYNC,i.H$.CONTEXT_SWITCH_ASYNC)}}validateUpdateAsync(e){return(0,l.GX)(e.text)&&(0,l.GZ)(e.image)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.CONTEXT_UPDATE_ASYNC,i.H$.CONTEXT_UPDATE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.CONTEXT_UPDATE_ASYNC,i.H$.CONTEXT_UPDATE_ASYNC)}}}},8494:(e,t,a)=>{a.r(t),a.d(t,{ContextTelegram:()=>s});var i=a(8119),r=a(6885),o=a(5273),l=a(8486),n=function(e,t,a,i){return new(a||(a=Promise))((function(r,o){function l(e){try{s(i.next(e))}catch(e){o(e)}}function n(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}s((i=i.apply(e,t||[])).next())}))};class s extends l._{chooseAsyncImpl(e){return Promise.reject((0,r.OS)(void 0,i.bo.CONTEXT_CHOOSE_ASYNC,i.H$.CONTEXT_CHOOSE_ASYNC))}createAsyncImpl(e){return Promise.reject((0,r.OS)(void 0,i.bo.CONTEXT_CREATE_ASYNC,i.H$.CONTEXT_CREATE_ASYNC))}getIdImpl(){return""}getPlayersAsyncImpl(){return Promise.reject((0,r.OS)(void 0,i.bo.CONTEXT_GET_PLAYERS_ASYNC,i.H$.CONTEXT_GET_PLAYERS_ASYNC))}getTypeImpl(){return"SOLO"}inviteAsyncImpl(e){return Promise.reject((0,r.OS)(void 0,i.bo.CONTEXT_INVITE_ASYNC,i.H$.CONTEXT_INVITE_ASYNC))}isSizeBetweenImpl(e,t){return null}shareAsyncImpl(e){return n(this,void 0,void 0,(function*(){try{const t={image:e.image,description:e.description};window.parent.postMessage({playdeck:{method:i.JS.CUSTOM_SHARE,value:t}},"*");return yield(0,o.p7)(i.JS.CUSTOM_SHARE)}catch(e){return Promise.reject((0,r.pP)(e,i.bo.CONTEXT_SHARE_ASYNC,i.H$.CONTEXT_SHARE_ASYNC))}}))}shareLinkAsyncImpl(e){return n(this,void 0,void 0,(function*(){try{const t={image:e.image};window.parent.postMessage({playdeck:{method:i.JS.GET_SHARE_LINK,value:t}},"*");return yield(0,o.p7)(i.JS.GET_SHARE_LINK)}catch(e){return Promise.reject((0,r.pP)(e,i.bo.CONTEXT_SHARE_LINK_ASYNC,i.H$.CONTEXT_SHARE_LINK_ASYNC))}}))}switchAsyncImpl(e,t){return Promise.reject((0,r.OS)(void 0,i.bo.CONTEXT_SWITCH_ASYNC,i.H$.CONTEXT_SWITCH_ASYNC))}updateAsyncImpl(e){return Promise.reject((0,r.OS)(void 0,i.bo.CONTEXT_UPDATE_ASYNC,i.H$.CONTEXT_UPDATE_ASYNC))}}},1721:(e,t,a)=>{a.d(t,{J:()=>d});var i=a(6885),r=a(5894),o=a(3423),l=a(5273),n=a(8119),s=function(e,t,a,i){return new(a||(a=Promise))((function(r,o){function l(e){try{s(i.next(e))}catch(e){o(e)}}function n(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}s((i=i.apply(e,t||[])).next())}))};class d{constructor(e){this._supportedAPIs=[],this._auth=e}get auth(){return this._auth}initializeAsync(){return s(this,void 0,void 0,(function*(){r.default._log.apiCall(n.bo.INITIALIZE_ASYNC),r.default._internalIsPlatformInitialized||(r.default._log.debug("Core: Platform not initialized yet, awaiting platform initialization.."),yield(0,l.N_)((()=>r.default._internalIsPlatformInitialized),"Core: Platform not initialized yet, awaiting platform initialization.."));const e=this.validateInitializeAsync();return e.valid?this.initializeAsyncImpl():(r.default._log.apiError(n.bo.INITIALIZE_ASYNC,e.error),Promise.reject(e.error))}))}startGameAsync(){return s(this,void 0,void 0,(function*(){r.default._log.apiCall(n.bo.START_GAME_ASYNC);const e=this.validateStartGameAsync();return e.valid?(r.default.setLoadingProgress(100),r.default._log.apiSuccess(n.bo.START_GAME_ASYNC),this.startGameAsyncImpl()):(r.default._log.apiError(n.bo.START_GAME_ASYNC,e.error),Promise.reject(e.error))}))}authenticateAsync(e){return r.default._log.apiCall(n.bo.AUTHENTICATE_ASYNC),this.authenticateAsyncImpl(e)}linkAccountAsync(){return r.default._log.apiCall(n.bo.LINK_ACCOUNT_ASYNC),this.linkAccountAsyncImpl()}setLoadingProgress(e){const t=this.validateSetLoadingProgress(e);return t.valid||(r.default._log.apiError(n.bo.SET_LOADING_PROGRESS,t.error),r.default._log.exception("Failed to reported loading progress.",t.error)),r.default._log.apiSuccess(n.bo.SET_LOADING_PROGRESS),this.setLoadingProgressImpl(e)}onPause(e){r.default._log.apiCall(n.bo.ON_PAUSE);const t=this.validateOnPause(e);return t.valid||(r.default._log.apiError(n.bo.ON_PAUSE,t.error),r.default._log.exception("Failed to register onPause callback.",t.error)),r.default._log.apiSuccess(n.bo.ON_PAUSE),this.onPauseImpl(e)}onResume(e){r.default._log.apiCall(n.bo.ON_RESUME);const t=this.validateOnResume(e);return t.valid||(r.default._log.apiError(n.bo.ON_RESUME,t.error),r.default._log.exception("Failed to register onResume callback.",t.error)),r.default._log.apiSuccess(n.bo.ON_RESUME),this.onResumeImpl(e)}performHapticFeedbackAsync(){return r.default._log.apiCall(n.bo.PERFORM_HAPTIC_FEEDBACK_ASYNC),this.performHapticFeedbackAsyncImpl()}getSupportedAPIs(){return r.default._log.apiCall(n.bo.GET_SUPPORTED_APIS),this._supportedAPIs}_initializePlatformAsync(){return r.default._log.internalCall("_initializePlatformAsync"),this._initializePlatformAsyncImpl()}initializeAsyncImpl(){throw(0,i.dJ)()}startGameAsyncImpl(){throw(0,i.dJ)()}authenticateAsyncImpl(e){throw(0,i.dJ)()}linkAccountAsyncImpl(){throw(0,i.dJ)()}setLoadingProgressImpl(e){throw(0,i.dJ)()}onPauseImpl(e){throw(0,i.dJ)()}onResumeImpl(e){throw(0,i.dJ)()}performHapticFeedbackAsyncImpl(){throw(0,i.dJ)()}_initializePlatformAsyncImpl(){throw(0,i.dJ)()}defaultInitializeAsyncImpl(){return Promise.all([r.default.ads._internalAdConfig.initialize(),r.default.player._internalPlayer.initialize()]).then((()=>{r.default.iap._internalTryEnableIAP(),(0,l.A8)(),r.default.isInitialized=!0,window.dispatchEvent(new Event("wortal-sdk-initialized")),r.default._log.info("Core: SDK initialization complete."),r.default._log.debug(`Core: SDK initialized for ${r.default._internalPlatform} platform.`)})).catch((e=>{throw(0,i.h4)(`Failed to initialize SDK during config.lateInitialize: ${e.message}`,"_initializeSDKAsyncGenericImpl")}))}defaultStartGameAsyncImpl(){return r.default.session._gameLoadingStop(),r.default.session._sendQueuedSessionData(),r.default.analytics._logGameStart(),Promise.resolve()}validateInitializeAsync(){return r.default.isInitialized?{valid:!1,error:(0,i.h4)("SDK already initialized.",n.bo.INITIALIZE_ASYNC,n.H$.INITIALIZE_ASYNC)}:{valid:!0}}validateStartGameAsync(){return r.default.isInitialized?{valid:!0}:{valid:!1,error:(0,i.h4)("SDK not initialized. Call initializeAsync first.",n.bo.START_GAME_ASYNC,n.H$.START_GAME_ASYNC)}}validateSetLoadingProgress(e){return!(0,o.gf)(e)||e<0||e>100?{valid:!1,error:(0,i.CH)("Progress must be a number between 0 and 100.",n.bo.SET_LOADING_PROGRESS,n.H$.SET_LOADING_PROGRESS)}:{valid:!0}}validateOnPause(e){return"function"!=typeof e?{valid:!1,error:(0,i.CH)("Callback must be a function.",n.bo.ON_PAUSE,n.H$.ON_PAUSE)}:{valid:!0}}validateOnResume(e){return"function"!=typeof e?{valid:!1,error:(0,i.CH)("Callback must be a function.",n.bo.ON_RESUME,n.H$.ON_RESUME)}:{valid:!0}}}},1034:(e,t,a)=>{a.d(t,{G:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{constructor(){this._isIAPEnabled=!1}_internalTryEnableIAP(){this._tryEnableIAP()}cancelSubscriptionAsync(e){o.default._log.apiCall(i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC);const t=this.validateCancelSubscriptionAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC),this.cancelSubscriptionAsyncImpl(e)):(o.default._log.apiError(i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,t.error),Promise.reject(t.error))}consumePurchaseAsync(e){o.default._log.apiCall(i.bo.IAP_CONSUME_PURCHASE_ASYNC);const t=this.validateConsumePurchaseAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.IAP_CONSUME_PURCHASE_ASYNC),this.consumePurchaseAsyncImpl(e)):(o.default._log.apiError(i.bo.IAP_CONSUME_PURCHASE_ASYNC,t.error),Promise.reject(t.error))}getCatalogAsync(){o.default._log.apiCall(i.bo.IAP_GET_CATALOG_ASYNC);const e=this.validateGetCatalogAsync();return e.valid?(o.default._log.apiSuccess(i.bo.IAP_GET_CATALOG_ASYNC),this.getCatalogAsyncImpl()):(o.default._log.apiError(i.bo.IAP_GET_CATALOG_ASYNC,e.error),Promise.reject(e.error))}getPurchasesAsync(){o.default._log.apiCall(i.bo.IAP_GET_PURCHASES_ASYNC);const e=this.validateGetPurchasesAsync();return e.valid?(o.default._log.apiSuccess(i.bo.IAP_GET_PURCHASES_ASYNC),this.getPurchasesAsyncImpl()):(o.default._log.apiError(i.bo.IAP_GET_PURCHASES_ASYNC,e.error),Promise.reject(e.error))}getSubscribableCatalogAsync(){o.default._log.apiCall(i.bo.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC);const e=this.validateGetSubscribableCatalogAsync();return e.valid?(o.default._log.apiSuccess(i.bo.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC),this.getSubscribableCatalogAsyncImpl()):(o.default._log.apiError(i.bo.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC,e.error),Promise.reject(e.error))}getSubscriptionsAsync(){o.default._log.apiCall(i.bo.IAP_GET_SUBSCRIPTIONS_ASYNC);const e=this.validateGetSubscriptionsAsync();return e.valid?(o.default._log.apiSuccess(i.bo.IAP_GET_SUBSCRIPTIONS_ASYNC),this.getSubscriptionsAsyncImpl()):(o.default._log.apiError(i.bo.IAP_GET_SUBSCRIPTIONS_ASYNC,e.error),Promise.reject(e.error))}isEnabled(){return o.default._log.apiCall(i.bo.IAP_IS_ENABLED),this.isEnabledImpl()}makePurchaseAsync(e){o.default._log.apiCall(i.bo.IAP_MAKE_PURCHASE_ASYNC);const t=this.validateMakePurchaseAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.IAP_MAKE_PURCHASE_ASYNC),this.makePurchaseAsyncImpl(e)):(o.default._log.apiError(i.bo.IAP_MAKE_PURCHASE_ASYNC,t.error),Promise.reject(t.error))}purchaseSubscriptionAsync(e){o.default._log.apiCall(i.bo.IAP_PURCHASE_SUBSCRIPTION_ASYNC);const t=this.validatePurchaseSubscriptionAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.IAP_PURCHASE_SUBSCRIPTION_ASYNC),this.purchaseSubscriptionAsyncImpl(e)):(o.default._log.apiError(i.bo.IAP_PURCHASE_SUBSCRIPTION_ASYNC,t.error),Promise.reject(t.error))}_tryEnableIAP(){return o.default._log.internalCall("IAP._tryEnableIAP"),o.default._log.debug("Checking for IAP compatibility.."),this._tryEnableIAPImpl()}validateCancelSubscriptionAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}}validateConsumePurchaseAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_CONSUME_PURCHASE_ASYNC,i.H$.IAP_CONSUME_PURCHASE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.IAP_CONSUME_PURCHASE_ASYNC,i.H$.IAP_CONSUME_PURCHASE_ASYNC)}}validateGetCatalogAsync(){return o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_GET_CATALOG_ASYNC,i.H$.IAP_GET_CATALOG_ASYNC)}}validateGetPurchasesAsync(){return o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_GET_PURCHASES_ASYNC,i.H$.IAP_GET_PURCHASES_ASYNC)}}validateGetSubscribableCatalogAsync(){return o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC,i.H$.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC)}}validateGetSubscriptionsAsync(){return o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_GET_SUBSCRIPTIONS_ASYNC,i.H$.IAP_GET_SUBSCRIPTIONS_ASYNC)}}validateMakePurchaseAsync(e){return(0,l.u2)(e)?o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_MAKE_PURCHASE_ASYNC,i.H$.IAP_MAKE_PURCHASE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.IAP_MAKE_PURCHASE_ASYNC,i.H$.IAP_MAKE_PURCHASE_ASYNC)}}validatePurchaseSubscriptionAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?this._isIAPEnabled?{valid:!0}:{valid:!1,error:(0,r.zt)("IAP is not enabled.",i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.wL)(void 0,i.bo.IAP_PURCHASE_SUBSCRIPTION_ASYNC,i.H$.IAP_PURCHASE_SUBSCRIPTION_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.IAP_PURCHASE_SUBSCRIPTION_ASYNC,i.H$.IAP_PURCHASE_SUBSCRIPTION_ASYNC)}}}},7562:(e,t,a)=>{a.r(t),a.d(t,{IAPXsolla:()=>d});var i=a(8119),r=a(6885),o=a(5894),l=a(5273),n=a(1034),s=function(e,t,a,i){return new(a||(a=Promise))((function(r,o){function l(e){try{s(i.next(e))}catch(e){o(e)}}function n(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}s((i=i.apply(e,t||[])).next())}))};class d extends n.G{constructor(){super(),this._requestPayload={projectID:0,token:""},this._isSandbox=!1,this._initializeXsolla().catch((e=>{o.default._log.exception(`IAP: Failed to initialize Xsolla: ${e}`)}))}cancelSubscriptionAsyncImpl(e){return Promise.reject((0,r.OS)(void 0,i.bo.IAP_CANCEL_SUBSCRIPTION_ASYNC,i.H$.IAP_CANCEL_SUBSCRIPTION_ASYNC))}consumePurchaseAsyncImpl(e){return s(this,void 0,void 0,(function*(){const t={sku:e,quantity:1};return this._consumeItem(t)}))}getCatalogAsyncImpl(){return s(this,void 0,void 0,(function*(){const e=[];let t=!0;const a={limit:50,offset:e.length};for(;t;)try{const i=yield this._getVirtualItemsList(a);e.push(...i.items),t=i.has_more}catch(e){return t=!1,Promise.reject(e)}return e.map((e=>({title:e.name,productID:e.sku,description:e.description,imageURI:e.image_url,price:`${e.price.amount} ${e.price.currency}`,priceCurrencyCode:e.price.currency,priceAmount:Number(e.price.amount)})))}))}getPurchasesAsyncImpl(){return s(this,void 0,void 0,(function*(){const e=[];let t=!0;const a={limit:50,offset:e.length};for(;t;)try{const i=yield this._getCurrentUsersInventory(a);e.push(...i.items),t=50===i.items.length}catch(e){return t=!1,Promise.reject(e)}return e.map((e=>Object.assign({productID:e.sku,paymentID:"",purchaseTime:"",purchaseToken:"",signedRequest:""},e)))}))}getSubscribableCatalogAsyncImpl(){return Promise.reject((0,r.OS)(void 0,i.bo.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC,i.H$.IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC))}getSubscriptionsAsyncImpl(){return Promise.reject((0,r.OS)(void 0,i.bo.IAP_GET_SUBSCRIPTIONS_ASYNC,i.H$.IAP_GET_SUBSCRIPTIONS_ASYNC))}isEnabledImpl(){return!0}makePurchaseAsyncImpl(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,a)=>s(this,void 0,void 0,(function*(){try{let l=!1,n=!1;const s={quantity:1,sandbox:this._isSandbox,settings:{redirect_policy:{redirect_conditions:"none",status_for_manual_redirection:"none"}},custom_parameters:{platform:o.default._internalPlatform,source:o.default.session._internalSession.source,gameID:o.default.session._internalSession.gameID}},d=yield this._createOrderWithSpecifiedItem(e.productID,s);this._payStationWidget.init({access_token:d.token,sandbox:this._isSandbox}),this._payStationWidget.on("status-delivering",(()=>{l=!0,n||(n=!0,o.default.analytics.logPurchase(e.productID)),t({productID:e.productID,purchaseToken:e.productID,purchaseTime:(new Date).toJSON(),signedRequest:d.token,paymentID:d.order_id.toString()})})),this._payStationWidget.on("status-done",(()=>{l=!0,n||(n=!0,o.default.analytics.logPurchase(e.productID)),t({productID:e.productID,purchaseToken:e.productID,purchaseTime:(new Date).toJSON(),signedRequest:d.token,paymentID:d.order_id.toString()})})),this._payStationWidget.on("status-troubled",(()=>{a((0,r.pP)("Payment failed.",i.bo.IAP_MAKE_PURCHASE_ASYNC,i.H$.IAP_MAKE_PURCHASE_ASYNC))})),this._payStationWidget.on("error",(()=>{a((0,r.pP)("Payment cancelled.",i.bo.IAP_MAKE_PURCHASE_ASYNC,i.H$.IAP_MAKE_PURCHASE_ASYNC))})),this._payStationWidget.on("close",(()=>{l||a((0,r.pP)("Payment cancelled.",i.bo.IAP_MAKE_PURCHASE_ASYNC,i.H$.IAP_MAKE_PURCHASE_ASYNC))})),this._payStationWidget.open()}catch(e){a((0,r.pP)(e,i.bo.IAP_MAKE_PURCHASE_ASYNC,i.H$.IAP_MAKE_PURCHASE_ASYNC))}}))))}))}purchaseSubscriptionAsyncImpl(e){return Promise.reject((0,r.OS)(void 0,i.bo.IAP_PURCHASE_SUBSCRIPTION_ASYNC,i.H$.IAP_PURCHASE_SUBSCRIPTION_ASYNC))}_tryEnableIAPImpl(){this._isIAPEnabled=!0,o.default._log.debug(`IAP initialized for ${o.default._internalPlatform} platform.`)}_getCurrentUsersInventory(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/user/inventory/items`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get user inventory: [${e.status}]`,"_getCurrentUsersInventory"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get user inventory: [${e}]`,"_getCurrentUsersInventory"))}}))}_getCurrentUsersVirtualBalance(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/user/virtual_currency_balance`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get user virtual currency: [${e.status}]`,"_getCurrentUsersVirtualBalance"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get user virtual currency: [${e}]`,"_getCurrentUsersVirtualBalance"))}}))}_getCurrentUsersTimeLimitedItems(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/user/time_limited_items`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get user time limited items: [${e.status}]`,"_getCurrentUsersTimeLimitedItems"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get user time limited items: [${e}]`,"_getCurrentUsersTimeLimitedItems"))}}))}_consumeItem(e,t){return s(this,void 0,void 0,(function*(){const a=this._getBaseURL(),i=new URL(`${a}/user/inventory/item/consume`),o=yield this._getXsollaToken();if(t){const e=new URLSearchParams;Object.entries(t).forEach((([t,a])=>{e.append(t,a.toString())})),i.search=e.toString()}const l={sku:e.sku,quantity:e.quantity};try{const e=yield fetch(i.toString(),{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(l)});return 200===e.status?Promise.resolve():Promise.reject((0,r.pP)(`Failed to consume item: [${e.status}]`,"_consumeItem"))}catch(e){return Promise.reject((0,r.pP)(`Failed to consume item: [${e}]`,"_consumeItem"))}}))}_createOrderWithSpecifiedItem(e,t){return s(this,void 0,void 0,(function*(){const a=this._getBaseURL(),i=new URL(`${a}/payment/item/${e}`),o=yield this._getXsollaToken(),l={currency:t.currency,locale:t.locale,sandbox:t.sandbox,quantity:t.quantity,promo_code:t.promo_code,settings:t.settings,custom_parameters:t.custom_parameters};try{const e=yield fetch(i.toString(),{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to create order with specified item: [${e.status}]`,"_createOrderWithSpecifiedItem"))}catch(e){return Promise.reject((0,r.pP)(`Failed to create order with specified item: [${e}]`,"_createOrderWithSpecifiedItem"))}}))}_getOrder(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/order/${e}`),i=yield this._getXsollaToken();try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get order: [${e.status}]`,"_getOrder"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get order: [${e}]`,"_getOrder"))}}))}_getVirtualItemsList(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/items/virtual_items`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get virtual items list: [${e.status}]`,"_getVirtualItemsList"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get virtual items list: [${e}]`,"_getVirtualItemsList"))}}))}_getVirtualItemBySKU(e,t){return s(this,void 0,void 0,(function*(){const a=this._getBaseURL(),i=new URL(`${a}/items/virtual_items/sku/${e}`),o=yield this._getXsollaToken();if(t){const e=new URLSearchParams;Object.entries(t).forEach((([t,a])=>{e.append(t,a.toString())})),i.search=e.toString()}try{const e=yield fetch(i.toString(),{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get virtual item by SKU: [${e.status}]`,"_getVirtualItemBySKU"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get virtual item by SKU: [${e}]`,"_getVirtualItemBySKU"))}}))}_getAllVirtualItemsList(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/items/virtual_items/all`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get all virtual items list: [${e.status}]`,"_getAllVirtualItemsList"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get all virtual items list: [${e}]`,"_getAllVirtualItemsList"))}}))}_getVirtualCurrencyList(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/items/virtual_currency`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get virtual currency list: [${e.status}]`,"_getVirtualCurrencyList"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get virtual currency list: [${e}]`,"_getVirtualCurrencyList"))}}))}_getVirtualCurrencyBySKU(e,t){return s(this,void 0,void 0,(function*(){const a=this._getBaseURL(),i=new URL(`${a}/items/virtual_currency/sku/${e}`),o=yield this._getXsollaToken();if(t){const e=new URLSearchParams;Object.entries(t).forEach((([t,a])=>{e.append(t,a.toString())})),i.search=e.toString()}try{const e=yield fetch(i.toString(),{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get virtual currency by SKU: [${e.status}]`,"_getVirtualCurrencyBySKU"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get virtual currency by SKU: [${e}]`,"_getVirtualCurrencyBySKU"))}}))}_getVirtualCurrencyPackageList(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/items/virtual_currency/package`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get virtual currency list: [${e.status}]`,"_getVirtualCurrencyList"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get virtual currency list: [${e}]`,"_getVirtualCurrencyList"))}}))}_getVirtualCurrencyPackageBySKU(e,t){return s(this,void 0,void 0,(function*(){const a=this._getBaseURL(),i=new URL(`${a}/items/virtual_currency/package/sku/${e}`),o=yield this._getXsollaToken();if(t){const e=new URLSearchParams;Object.entries(t).forEach((([t,a])=>{e.append(t,a.toString())})),i.search=e.toString()}try{const e=yield fetch(i.toString(),{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get virtual currency by SKU: [${e.status}]`,"_getVirtualCurrencyBySKU"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get virtual currency by SKU: [${e}]`,"_getVirtualCurrencyBySKU"))}}))}_getItemsListBySpecifiedGroup(e,t){return s(this,void 0,void 0,(function*(){const a=this._getBaseURL(),i=new URL(`${a}/items/virtual_items/group/${e}`),o=yield this._getXsollaToken();if(t){const e=new URLSearchParams;Object.entries(t).forEach((([t,a])=>{e.append(t,a.toString())})),i.search=e.toString()}try{const e=yield fetch(i.toString(),{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get items list by specified group: [${e.status}]`,"_getItemsListBySpecifiedGroup"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get items list by specified group: [${e}]`,"_getItemsListBySpecifiedGroup"))}}))}_getItemsGroupList(e){return s(this,void 0,void 0,(function*(){const t=this._getBaseURL(),a=new URL(`${t}/items/groups`),i=yield this._getXsollaToken();if(e){const t=new URLSearchParams;Object.entries(e).forEach((([e,a])=>{t.append(e,a.toString())})),a.search=t.toString()}try{const e=yield fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(200===e.status){return yield e.json()}return Promise.reject((0,r.pP)(`Failed to get items group list: [${e.status}]`,"_getItemsGroupList"))}catch(e){return Promise.reject((0,r.pP)(`Failed to get items group list: [${e}]`,"_getItemsGroupList"))}}))}_initializeXsolla(){return s(this,void 0,void 0,(function*(){this._loadPayStationWidget(),o.default.isInitialized||(yield(0,l.N_)((()=>o.default.isInitialized)));const e=o.default._internalPlatform;this._isSandbox="debug"===e||"crazygames"===e&&o.default._internalPlatformSDK.isQaTool}))}_getXsollaToken(){return s(this,void 0,void 0,(function*(){let e="";try{return e="crazygames"===o.default._internalPlatform?yield o.default._internalPlatformSDK.user.getXsollaUserToken():yield this._getXsollaUserToken(),e}catch(e){return Promise.reject((0,r.pP)(e,"_getXsollaToken"))}}))}_getXsollaUserToken(){return s(this,void 0,void 0,(function*(){const e=o.default._internalAuth;if(!e.token)return Promise.reject((0,r.zt)("Missing auth token, user is not logged in.","_getXsollaUserToken"));if(!e.projectID)return Promise.reject((0,r.zt)("Project ID is not set yet.","_getXsollaUserToken"));try{const t=`${i.Sn.WORTAL_XSOLLA_CONFIG}token/`,a={token:e.token,project_id:e.projectID},r=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return(yield r.json()).token}catch(e){return Promise.reject((0,r.pP)(e,"_getXsollaUserToken"))}}))}_loadPayStationWidget(){const e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=i.Oj.XSOLLA_PAY_STATION,e.addEventListener("load",(()=>{o.default._log.debug("IAP: Xsolla Pay Station Widget loaded."),this._payStationWidget=window.XPayStationWidget}),!1),document.head.appendChild(e)}_getBaseURL(){return`${i.Sn.XSOLLA_STORE}/v2/project/${o.default._internalAuth.projectID}`}}},6121:(e,t,a)=>{a.d(t,{E:()=>l});var i=a(5894),r=a(2128),o=a(5840);class l{constructor(e){this._data={rank:0,score:0,formattedScore:"",timestamp:0,details:""},i.default._log.debug("Creating leaderboard entry",e),this._data.player=e.player,this._data.rank=e.rank,this._data.score=e.score,this._data.formattedScore=e.formattedScore,this._data.timestamp=e.timestamp,this._data.details=e.details}get player(){return new o.H(this._data.player)}get rank(){return this._data.rank}get score(){return this._data.score}get formattedScore(){return this._data.formattedScore}get timestamp(){return this._data.timestamp}get details(){return this._data.details}static mock(e=1,t=100){return new l({player:r.j.mock(),rank:e||1,score:t||100,formattedScore:`${t} points`,timestamp:Date.now()-6e4*e,details:"Mock entry"})}}},5840:(e,t,a)=>{a.d(t,{H:()=>l});var i=a(5894),r=a(5026),o=function(e,t,a,i){return new(a||(a=Promise))((function(r,o){function l(e){try{s(i.next(e))}catch(e){o(e)}}function n(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}s((i=i.apply(e,t||[])).next())}))};class l extends r.a{constructor(e){i.default._log.debug("Creating LeaderboardPlayer...",e),super(),this._data.id=e.id,this._data.name=e.name,this._data.photo=e.photo,this._data.isFirstPlay=e.isFirstPlay,this._data.daysSinceFirstPlay=e.daysSinceFirstPlay}initialize(){return o(this,void 0,void 0,(function*(){return Promise.resolve()}))}}},7e3:(e,t,a)=>{a.d(t,{s:()=>r});var i=a(5894);class r{constructor(e,t,a=""){this._data={id:0,name:"",contextId:""},i.default._log.debug(`Creating leaderboard: ${t} / ${e} / ${a}`),this._data.id=e,this._data.name=t,this._data.contextId=a}get name(){return this._data.name}get contextId(){return this._data.contextId}static mock(){return new r(1234567890,"Mock Leaderboard","1234567890")}}},7502:(e,t,a)=>{a.d(t,{c:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{getConnectedPlayersEntriesAsync(e,t,a){o.default._log.apiCall(i.bo.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC);const r=this.validateGetConnectedPlayersEntriesAsync(e,t,a);return r.valid?(o.default._log.apiSuccess(i.bo.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC),this.getConnectedPlayersEntriesAsyncImpl(e,t,a)):(o.default._log.apiError(i.bo.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC,r.error),Promise.reject(r.error))}getEntriesAsync(e,t,a=0){o.default._log.apiCall(i.bo.LEADERBOARD_GET_ENTRIES_ASYNC);const r=this.validateGetEntriesAsync(e,t,a);return r.valid?(o.default._log.apiSuccess(i.bo.LEADERBOARD_GET_ENTRIES_ASYNC),this.getEntriesAsyncImpl(e,t,a)):(o.default._log.apiError(i.bo.LEADERBOARD_GET_ENTRIES_ASYNC,r.error),Promise.reject(r.error))}getEntryCountAsync(e){o.default._log.apiCall(i.bo.LEADERBOARD_GET_ENTRY_COUNT_ASYNC);const t=this.validateGetEntryCountAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.LEADERBOARD_GET_ENTRY_COUNT_ASYNC),this.getEntryCountAsyncImpl(e)):(o.default._log.apiError(i.bo.LEADERBOARD_GET_ENTRY_COUNT_ASYNC,t.error),Promise.reject(t.error))}getLeaderboardAsync(e){o.default._log.apiCall(i.bo.LEADERBOARD_GET_LEADERBOARD_ASYNC);const t=this.validateGetLeaderboardAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.LEADERBOARD_GET_LEADERBOARD_ASYNC),this.getLeaderboardAsyncImpl(e)):(o.default._log.apiError(i.bo.LEADERBOARD_GET_LEADERBOARD_ASYNC,t.error),Promise.reject(t.error))}getPlayerEntryAsync(e){o.default._log.apiCall(i.bo.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC);const t=this.validateGetPlayerEntryAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC),this.getPlayerEntryAsyncImpl(e)):(o.default._log.apiError(i.bo.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC,t.error),Promise.reject(t.error))}sendEntryAsync(e,t,a=""){o.default._log.apiCall(i.bo.LEADERBOARD_SEND_ENTRY_ASYNC);const r=this.validateSendEntryAsync(e,t,a);return r.valid?(o.default._log.apiSuccess(i.bo.LEADERBOARD_SEND_ENTRY_ASYNC),this.sendEntryAsyncImpl(e,t,a)):(o.default._log.apiError(i.bo.LEADERBOARD_SEND_ENTRY_ASYNC,r.error),Promise.reject(r.error))}validateGetConnectedPlayersEntriesAsync(e,t,a){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC,i.H$.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC,i.H$.LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC)}}validateGetEntriesAsync(e,t,a){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.LEADERBOARD_GET_ENTRIES_ASYNC,i.H$.LEADERBOARD_GET_ENTRIES_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.LEADERBOARD_GET_ENTRIES_ASYNC,i.H$.LEADERBOARD_GET_ENTRIES_ASYNC)}}validateGetEntryCountAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.LEADERBOARD_GET_ENTRY_COUNT_ASYNC,i.H$.LEADERBOARD_GET_ENTRY_COUNT_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.LEADERBOARD_GET_ENTRY_COUNT_ASYNC,i.H$.LEADERBOARD_GET_ENTRY_COUNT_ASYNC)}}validateGetLeaderboardAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.LEADERBOARD_GET_LEADERBOARD_ASYNC,i.H$.LEADERBOARD_GET_LEADERBOARD_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.LEADERBOARD_GET_LEADERBOARD_ASYNC,i.H$.LEADERBOARD_GET_LEADERBOARD_ASYNC)}}validateGetPlayerEntryAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC,i.H$.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC,i.H$.LEADERBOARD_GET_PLAYER_ENTRY_ASYNC)}}validateSendEntryAsync(e,t,a){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.LEADERBOARD_SEND_ENTRY_ASYNC,i.H$.LEADERBOARD_SEND_ENTRY_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.LEADERBOARD_SEND_ENTRY_ASYNC,i.H$.LEADERBOARD_SEND_ENTRY_ASYNC)}}}},6627:(e,t,a)=>{a.d(t,{r:()=>r});var i=a(5894);class r{constructor(e){i.default._log.debug("ScheduledNotification created with data:",e),this.notificationData=e}get id(){return this.notificationData.id}get status(){return this.notificationData.status}get label(){return this.notificationData.label}get createdTime(){return this.notificationData.createdTime}static mock(e){const t=Math.floor(1e6*Math.random()).toString();return new r({id:t,status:"SCHEDULED",label:e||"mock_notification",createdTime:(new Date).toISOString()})}}},5266:(e,t,a)=>{a.d(t,{l:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{cancelAllAsync(e){o.default._log.apiCall(i.bo.NOTIFICATIONS_CANCEL_ALL_ASYNC);const t=this.validateCancelAllAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.NOTIFICATIONS_CANCEL_ALL_ASYNC),this.cancelAllAsyncImpl(e)):(o.default._log.apiError(i.bo.NOTIFICATIONS_CANCEL_ALL_ASYNC,t.error),Promise.reject(t.error))}cancelAsync(e){o.default._log.apiCall(i.bo.NOTIFICATIONS_CANCEL_ASYNC);const t=this.validateCancelAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.NOTIFICATIONS_CANCEL_ASYNC),this.cancelAsyncImpl(e)):(o.default._log.apiError(i.bo.NOTIFICATIONS_CANCEL_ASYNC,t.error),Promise.reject(t.error))}getHistoryAsync(){o.default._log.apiCall(i.bo.NOTIFICATIONS_GET_HISTORY_ASYNC);const e=this.validateGetHistoryAsync();return e.valid?(o.default._log.apiSuccess(i.bo.NOTIFICATIONS_GET_HISTORY_ASYNC),this.getHistoryAsyncImpl()):(o.default._log.apiError(i.bo.NOTIFICATIONS_GET_HISTORY_ASYNC,e.error),Promise.reject(e.error))}scheduleAsync(e){o.default._log.apiCall(i.bo.NOTIFICATIONS_SCHEDULE_ASYNC);const t=this.validateScheduleAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.NOTIFICATIONS_SCHEDULE_ASYNC),this.scheduleAsyncImpl(e)):(o.default._log.apiError(i.bo.NOTIFICATIONS_SCHEDULE_ASYNC,t.error),Promise.reject(t.error))}validateCancelAllAsync(e){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.NOTIFICATIONS_CANCEL_ALL_ASYNC,i.H$.NOTIFICATIONS_CANCEL_ALL_ASYNC)}}validateCancelAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.NOTIFICATIONS_CANCEL_ASYNC,i.H$.NOTIFICATIONS_CANCEL_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.NOTIFICATIONS_CANCEL_ASYNC,i.H$.NOTIFICATIONS_CANCEL_ASYNC)}}validateGetHistoryAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.NOTIFICATIONS_GET_HISTORY_ASYNC,i.H$.NOTIFICATIONS_GET_HISTORY_ASYNC)}}validateScheduleAsync(e){return(0,l.Qh)(e.title)?(0,l.Qh)(e.body)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.NOTIFICATIONS_SCHEDULE_ASYNC,i.H$.NOTIFICATIONS_SCHEDULE_ASYNC)}:{valid:!1,error:(0,r.CH)("body",i.bo.NOTIFICATIONS_SCHEDULE_ASYNC,i.H$.NOTIFICATIONS_SCHEDULE_ASYNC)}:{valid:!1,error:(0,r.CH)("title",i.bo.NOTIFICATIONS_SCHEDULE_ASYNC,i.H$.NOTIFICATIONS_SCHEDULE_ASYNC)}}}},2128:(e,t,a)=>{a.d(t,{j:()=>l});var i=a(5894),r=a(5026),o=function(e,t,a,i){return new(a||(a=Promise))((function(r,o){function l(e){try{s(i.next(e))}catch(e){o(e)}}function n(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}s((i=i.apply(e,t||[])).next())}))};class l extends r.a{constructor(e){super(),this._data.id=e.id,this._data.name=e.name,this._data.photo=e.photo,this._data.isFirstPlay=e.isFirstPlay,this._data.daysSinceFirstPlay=e.daysSinceFirstPlay,i.default._log.debug("Created ConnectedPlayer:",e)}initialize(){return o(this,void 0,void 0,(function*(){return Promise.resolve()}))}static mock(){const e={id:"1234567890",name:"Mock Player",photo:"https://storage.googleapis.com/html5gameportal.com/images/08ac22fd-6e4b-4a33-9ea5-89bb412f6099-Trash_Factory_Facebook_Small_App_Icon_1024x1024.png",isFirstPlay:!1,daysSinceFirstPlay:0};return i.default._log.debug("Mocking ConnectedPlayer...",e),new l(e)}}},3094:(e,t,a)=>{a.d(t,{c:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(5273);class n{constructor(e){this._player=e}get _internalPlayer(){return this._player}set _internalPlayer(e){this._player=e}canSubscribeBotAsync(){o.default._log.apiCall(i.bo.PLAYER_CAN_SUBSCRIBE_BOT_ASYNC);const e=this.validateCanSubscribeBotAsync();return e.valid?(o.default._log.apiSuccess(i.bo.PLAYER_CAN_SUBSCRIBE_BOT_ASYNC),this.canSubscribeBotAsyncImpl()):(o.default._log.apiError(i.bo.PLAYER_CAN_SUBSCRIBE_BOT_ASYNC,e.error),Promise.reject(e.error))}flushDataAsync(){o.default._log.apiCall(i.bo.PLAYER_FLUSH_DATA_ASYNC);const e=this.validateFlushDataAsync();return e.valid?(o.default._log.apiSuccess(i.bo.PLAYER_FLUSH_DATA_ASYNC),this.flushDataAsyncImpl()):(o.default._log.apiError(i.bo.PLAYER_FLUSH_DATA_ASYNC,e.error),Promise.reject(e.error))}getASIDAsync(){return o.default._log.apiCall(i.bo.PLAYER_GET_ASID_ASYNC),this.getASIDAsyncImpl()}getConnectedPlayersAsync(e){o.default._log.apiCall(i.bo.PLAYER_GET_CONNECTED_PLAYERS_ASYNC);const t=this.validateGetConnectedPlayersAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.PLAYER_GET_CONNECTED_PLAYERS_ASYNC),this.getConnectedPlayersAsyncImpl(e)):(o.default._log.apiError(i.bo.PLAYER_GET_CONNECTED_PLAYERS_ASYNC,t.error),Promise.reject(t.error))}getDataAsync(e){o.default._log.apiCall(i.bo.PLAYER_GET_DATA_ASYNC);const t=this.validateGetDataAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.PLAYER_GET_DATA_ASYNC),this.getDataAsyncImpl(e)):(o.default._log.apiError(i.bo.PLAYER_GET_DATA_ASYNC,t.error),Promise.reject(t.error))}getID(){o.default._log.apiCall(i.bo.PLAYER_GET_ID);const e=this.validateGetID();if(!e.valid)throw o.default._log.apiError(i.bo.PLAYER_GET_ID,e.error),e.error;return o.default._log.apiSuccess(i.bo.PLAYER_GET_ID),this._player.id}getName(){o.default._log.apiCall(i.bo.PLAYER_GET_NAME);const e=this.validateGetName();if(!e.valid)throw o.default._log.apiError(i.bo.PLAYER_GET_NAME,e.error),e.error;return o.default._log.apiSuccess(i.bo.PLAYER_GET_NAME),this._player.name}getPhoto(){o.default._log.apiCall(i.bo.PLAYER_GET_PHOTO);const e=this.validateGetPhoto();if(!e.valid)throw o.default._log.apiError(i.bo.PLAYER_GET_PHOTO,e.error),e.error;return o.default._log.apiSuccess(i.bo.PLAYER_GET_PHOTO),this._player.photo}getSignedASIDAsync(){o.default._log.apiCall(i.bo.PLAYER_GET_SIGNED_ASID_ASYNC);const e=this.validateGetSignedASIDAsync();return e.valid?(o.default._log.apiSuccess(i.bo.PLAYER_GET_SIGNED_ASID_ASYNC),this.getSignedASIDAsyncImpl()):(o.default._log.apiError(i.bo.PLAYER_GET_SIGNED_ASID_ASYNC,e.error),Promise.reject(e.error))}getSignedPlayerInfoAsync(){o.default._log.apiCall(i.bo.PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC);const e=this.validateGetSignedPlayerInfoAsync();return e.valid?(o.default._log.apiSuccess(i.bo.PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC),this.getSignedPlayerInfoAsyncImpl()):(o.default._log.apiError(i.bo.PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC,e.error),Promise.reject(e.error))}getTokenAsync(){o.default._log.apiCall(i.bo.PLAYER_GET_TOKEN_ASYNC);const e=this.validateGetTokenAsync();return e.valid?(o.default._log.apiSuccess(i.bo.PLAYER_GET_TOKEN_ASYNC),this.getTokenAsyncImpl()):(o.default._log.apiError(i.bo.PLAYER_GET_TOKEN_ASYNC,e.error),Promise.reject(e.error))}isFirstPlay(){o.default._log.apiCall(i.bo.PLAYER_IS_FIRST_PLAY);const e=this.validateIsFirstPlay();if(!e.valid)throw o.default._log.apiError(i.bo.PLAYER_IS_FIRST_PLAY,e.error),e.error;return o.default._log.apiSuccess(i.bo.PLAYER_IS_FIRST_PLAY),this._player.isFirstPlay}isLoggedIn(){o.default._log.apiCall(i.bo.PLAYER_IS_LOGGED_IN);const e=this.validateIsLoggedIn();if(!e.valid)throw o.default._log.apiError(i.bo.PLAYER_IS_LOGGED_IN,e.error),e.error;return o.default._log.apiSuccess(i.bo.PLAYER_IS_LOGGED_IN),this.isLoggedInImpl()}onLogin(e){o.default._log.apiCall(i.bo.PLAYER_ON_LOGIN);const t=this.validateOnLogin(e);if(!t.valid)throw o.default._log.apiError(i.bo.PLAYER_ON_LOGIN,t.error),t.error;return o.default._log.apiSuccess(i.bo.PLAYER_ON_LOGIN),this.onLoginImpl(e)}setDataAsync(e){o.default._log.apiCall(i.bo.PLAYER_SET_DATA_ASYNC);const t=this.validateSetDataAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.PLAYER_SET_DATA_ASYNC),this.setDataAsyncImpl(e)):(o.default._log.apiError(i.bo.PLAYER_SET_DATA_ASYNC,t.error),Promise.reject(t.error))}subscribeBotAsync(){o.default._log.apiCall(i.bo.PLAYER_SUBSCRIBE_BOT_ASYNC);const e=this.validateSubscribeBotAsync();return e.valid?(o.default._log.apiSuccess(i.bo.PLAYER_SUBSCRIBE_BOT_ASYNC),this.subscribeBotAsyncImpl()):(o.default._log.apiError(i.bo.PLAYER_SUBSCRIBE_BOT_ASYNC,e.error),Promise.reject(e.error))}defaultGetDataAsyncImpl(e){const t={},a=localStorage.getItem(`${o.default.session._internalSession.gameID}-save-data`);if(a)try{const i=JSON.parse(a);e.forEach((e=>{t[e]=i[e]}))}catch(e){o.default._log.exception(`Error loading object from localStorage: ${e.message}`)}return Promise.resolve(t)}defaultSetDataAsyncImpl(e){try{return localStorage.setItem(`${o.default.session._internalSession.gameID}-save-data`,JSON.stringify(e)),o.default._log.debug("Player: Saved data to localStorage."),Promise.resolve()}catch(e){return Promise.reject((0,r.pP)(`Error saving object to localStorage: ${e.message}`,i.bo.PLAYER_SET_DATA_ASYNC,i.H$.PLAYER_SET_DATA_ASYNC))}}defaultIsLoggedInImpl(){return o.default._internalAuth.isLoggedIn}defaultOnLoginImpl(e){l.e1.push(e)}validateCanSubscribeBotAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_CAN_SUBSCRIBE_BOT_ASYNC,i.H$.PLAYER_CAN_SUBSCRIBE_BOT_ASYNC)}}validateFlushDataAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_FLUSH_DATA_ASYNC,i.H$.PLAYER_FLUSH_DATA_ASYNC)}}validateGetConnectedPlayersAsync(e){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_CONNECTED_PLAYERS_ASYNC,i.H$.PLAYER_GET_CONNECTED_PLAYERS_ASYNC)}}validateGetDataAsync(e){return Array.isArray(e)&&e.length?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_DATA_ASYNC,i.H$.PLAYER_GET_DATA_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.PLAYER_GET_DATA_ASYNC,i.H$.PLAYER_GET_DATA_ASYNC)}}validateGetID(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_ID,i.H$.PLAYER_GET_ID)}}validateGetName(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_NAME,i.H$.PLAYER_GET_NAME)}}validateGetPhoto(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_PHOTO,i.H$.PLAYER_GET_PHOTO)}}validateGetSignedASIDAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_SIGNED_ASID_ASYNC,i.H$.PLAYER_GET_SIGNED_ASID_ASYNC)}}validateGetSignedPlayerInfoAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC,i.H$.PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC)}}validateGetTokenAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_GET_TOKEN_ASYNC,i.H$.PLAYER_GET_TOKEN_ASYNC)}}validateIsFirstPlay(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_IS_FIRST_PLAY,i.H$.PLAYER_IS_FIRST_PLAY)}}validateIsLoggedIn(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_IS_LOGGED_IN,i.H$.PLAYER_IS_LOGGED_IN)}}validateOnLogin(e){return"function"!=typeof e?{valid:!1,error:(0,r.CH)(void 0,i.bo.PLAYER_ON_LOGIN,i.H$.PLAYER_ON_LOGIN)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_ON_LOGIN,i.H$.PLAYER_ON_LOGIN)}}validateSetDataAsync(e){return"object"!=typeof e?{valid:!1,error:(0,r.CH)(void 0,i.bo.PLAYER_SET_DATA_ASYNC,i.H$.PLAYER_SET_DATA_ASYNC)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_SET_DATA_ASYNC,i.H$.PLAYER_SET_DATA_ASYNC)}}validateSubscribeBotAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.PLAYER_SUBSCRIBE_BOT_ASYNC,i.H$.PLAYER_SUBSCRIBE_BOT_ASYNC)}}}},8880:(e,t,a)=>{a.r(t),a.d(t,{SessionTelegram:()=>s});var i=a(8119),r=a(6885),o=a(5894),l=a(5273),n=a(8882);class s extends n.h{navigateToExternalUrlImpl(e){window.open(e,"_blank")}gameplayStartImpl(){}gameplayStopImpl(){}getDeviceImpl(){return(0,l.e8)()}getEntryPointAsyncImpl(){return Promise.reject((0,r.OS)(void 0,i.bo.SESSION_GET_ENTRY_POINT_ASYNC,i.H$.SESSION_GET_ENTRY_POINT_ASYNC))}getEntryPointDataImpl(){return{}}getLocaleImpl(){return o.default.session._internalSession.locale}getTrafficSourceImpl(){return{}}happyTimeImpl(){}isAudioEnabledImpl(){return this._defaultIsAudioEnabledImpl()}onAudioStatusChangeImpl(e){return this._defaultOnAudioStatusChangeImpl(e)}setSessionDataImpl(e){}switchGameAsyncImpl(e,t){return Promise.reject((0,r.OS)(void 0,i.bo.SESSION_SWITCH_GAME_ASYNC,i.H$.SESSION_SWITCH_GAME_ASYNC))}_gameLoadingStartImpl(){return o.default.session._internalGameState.startGameLoadTimer()}_gameLoadingStopImpl(){return o.default.session._internalGameState.stopGameLoadTimer()}}},8882:(e,t,a)=>{a.d(t,{h:()=>s});var i=a(8119),r=a(6885),o=a(5894),l=a(3423),n=a(5273);class s{constructor(e,t){this._game=e,this._session=t,setInterval((()=>{this._storeSessionData()}),5e3)}get _internalGameState(){return this._game}get _internalSession(){return this._session}gameplayStart(){o.default._log.apiCall(i.bo.SESSION_GAMEPLAY_START);const e=this.validateGameplayStart();return e.valid?(o.default._log.apiSuccess(i.bo.SESSION_GAMEPLAY_START),this.gameplayStartImpl()):(o.default._log.apiError(i.bo.SESSION_GAMEPLAY_START,e.error),void o.default._log.exception("Failed to log gameplayStart.",e.error))}gameplayStop(){o.default._log.apiCall(i.bo.SESSION_GAMEPLAY_STOP);const e=this.validateGameplayStop();return e.valid?(o.default._log.apiSuccess(i.bo.SESSION_GAMEPLAY_STOP),this.gameplayStopImpl()):(o.default._log.apiError(i.bo.SESSION_GAMEPLAY_STOP,e.error),void o.default._log.exception("Failed to log gameplayStop.",e.error))}getDevice(){return o.default._log.apiCall(i.bo.SESSION_GET_DEVICE),this.getDeviceImpl()}getEntryPointAsync(){o.default._log.apiCall(i.bo.SESSION_GET_ENTRY_POINT_ASYNC);const e=this.validateGetEntryPointAsync();return e.valid?(o.default._log.apiSuccess(i.bo.SESSION_GET_ENTRY_POINT_ASYNC),this.getEntryPointAsyncImpl()):(o.default._log.apiError(i.bo.SESSION_GET_ENTRY_POINT_ASYNC,e.error),Promise.reject(e.error))}getEntryPointData(){o.default._log.apiCall(i.bo.SESSION_GET_ENTRY_POINT_DATA);const e=this.validateGetEntryPointData();return e.valid?(o.default._log.apiSuccess(i.bo.SESSION_GET_ENTRY_POINT_DATA),this.getEntryPointDataImpl()):(o.default._log.apiError(i.bo.SESSION_GET_ENTRY_POINT_DATA,e.error),o.default._log.exception("Failed to get entry point data.",e.error),{})}getLocale(){return o.default._log.apiCall(i.bo.SESSION_GET_LOCALE),this.getLocaleImpl()}getOrientation(){return o.default._log.apiCall(i.bo.SESSION_GET_ORIENTATION),this._session.orientation}getPlatform(){return o.default._log.apiCall(i.bo.SESSION_GET_PLATFORM),o.default._internalPlatform}getTrafficSource(){o.default._log.apiCall(i.bo.SESSION_GET_TRAFFIC_SOURCE);const e=this.validateGetTrafficSource();return e.valid?(o.default._log.apiSuccess(i.bo.SESSION_GET_TRAFFIC_SOURCE),this.getTrafficSourceImpl()):(o.default._log.apiError(i.bo.SESSION_GET_TRAFFIC_SOURCE,e.error),o.default._log.exception("Failed to get traffic source.",e.error),{})}happyTime(){o.default._log.apiCall(i.bo.SESSION_HAPPY_TIME);const e=this.validateHappyTime();return e.valid?(o.default._log.apiSuccess(i.bo.SESSION_HAPPY_TIME),this.happyTimeImpl()):(o.default._log.apiError(i.bo.SESSION_HAPPY_TIME,e.error),void o.default._log.exception("Failed to trigger happytime",e.error))}isAudioEnabled(){return this.isAudioEnabledImpl()}onAudioStatusChange(e){o.default._log.apiCall(i.bo.SESSION_ON_AUDIO_STATUS_CHANGE);const t=this.validateOnAudioStatusChange(e);return t.valid?this.onAudioStatusChangeImpl(e):(o.default._log.apiError(i.bo.SESSION_ON_AUDIO_STATUS_CHANGE,t.error),void o.default._log.exception("Failed to register callback.",t.error))}onOrientationChange(e){o.default._log.apiCall(i.bo.SESSION_ON_ORIENTATION_CHANGE);const t=this.validateOnOrientationChange(e);if(!t.valid)return o.default._log.apiError(i.bo.SESSION_ON_ORIENTATION_CHANGE,t.error),void o.default._log.exception("Failed to register callback.",t.error);screen&&screen.orientation?(screen.orientation.onchange=()=>{"portrait-primary"===screen.orientation.type||"portrait-secondary"===screen.orientation.type?(this._session.orientation="portrait",e("portrait")):"landscape-primary"===screen.orientation.type||"landscape-secondary"===screen.orientation.type?(this._session.orientation="landscape",e("landscape")):(o.default._log.warn("Session: Could not determine screen orientation, defaulting to portrait."),this._session.orientation="portrait",e("portrait"))},o.default._log.apiSuccess(i.bo.SESSION_ON_ORIENTATION_CHANGE)):o.default._log.warn("Session: Could not get screen orientation, disabling callback.")}setSessionData(e){o.default._log.apiCall(i.bo.SESSION_SET_SESSION_DATA);const t=this.validateSetSessionData(e);return t.valid?(o.default._log.apiSuccess(i.bo.SESSION_SET_SESSION_DATA),this.setSessionDataImpl(e)):(o.default._log.apiError(i.bo.SESSION_SET_SESSION_DATA,t.error),void o.default._log.exception("Failed to set session data.",t.error))}switchGameAsync(e,t){o.default._log.apiCall(i.bo.SESSION_SWITCH_GAME_ASYNC);const a=this.validateSwitchGameAsync(e,t);return a.valid?(o.default._log.apiSuccess(i.bo.SESSION_SWITCH_GAME_ASYNC),this.switchGameAsyncImpl(e,t)):(o.default._log.apiError(i.bo.SESSION_SWITCH_GAME_ASYNC,a.error),Promise.reject(a.error))}navigateToExternalUrl(e){o.default._log.apiCall(i.bo.SESSION_NAVIGATE_TO_EXTERNAL_URL);const t=this.validatenavigateToExternalUrl(e);return t.valid?(o.default._log.apiSuccess(i.bo.SESSION_NAVIGATE_TO_EXTERNAL_URL),this.navigateToExternalUrlImpl(e)):(o.default._log.apiError(i.bo.SESSION_NAVIGATE_TO_EXTERNAL_URL,t.error),void o.default._log.exception("Failed to navigate to external url",t.error))}_gameLoadingStart(){return o.default._log.internalCall(i.bo.SESSION_GAME_LOADING_START),this._gameLoadingStartImpl()}_gameLoadingStop(){return o.default._log.internalCall(i.bo.SESSION_GAME_LOADING_STOP),this._gameLoadingStopImpl()}_storeSessionData(e=!1){if(!o.default.isInitialized)return void o.default._log.debug("Session: SDK is not yet initialized, session data will not be stored until after initialization.");if("undefined"==typeof sessionStorage||!sessionStorage)return;const t=`wortal_${this._session.gameID}_${o.default.player._internalPlayer.id}`,a={sessionID:this._session.sessionID,playerID:o.default.player._internalPlayer.id,gameID:this._session.gameID,timePlayed:this._session.timePlayed,platform:o.default._internalPlatform,adsCalled:o.default.ads._internalAdConfig.adsCalled,adsShown:o.default.ads._internalAdConfig.adsShown,sdk:"2.9.8",eventSent:e};try{const e=JSON.stringify(a);sessionStorage.setItem(t,e)}catch(e){o.default._log.exception(`Failed to save session to session storage because ${e}`)}}_sendQueuedSessionData(){if(o.default._log.internalCall("_sendQueuedSessionData"),!o.default.isInitialized)return void o.default._log.warn("Session: SDK is not yet initialized, do not attempt to send queued events before initialization is complete.");if("undefined"==typeof sessionStorage||!sessionStorage)return;let e=null;const t=`wortal_${this._session.gameID}_${o.default.player._internalPlayer.id}`;try{e=sessionStorage.getItem(t)}catch(e){return void o.default._log.exception(`Failed to get session from session storage because ${e}`)}if(!e)return void o.default._log.debug("Session: No session data found in session storage.");const a=JSON.parse(e);if(!a)return void o.default._log.warn("Session: Could not parse session data from session storage.");if(a.eventSent)return;const i={name:"GameEnd",features:a};o.default.analytics._logQueuedEvent(i)?(this._storeSessionData(!0),o.default._log.debug("Session: Sent queued session data.",i)):o.default._log.warn("Session: Failed to send queued session data.")}_defaultIsAudioEnabledImpl(){return this._session.isAudioEnabled}_defaultOnAudioStatusChangeImpl(e){n.bP.push(e)}validateGameplayStart(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_GAMEPLAY_START,i.H$.SESSION_GAMEPLAY_START)}}validateGameplayStop(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_GAMEPLAY_STOP,i.H$.SESSION_GAMEPLAY_STOP)}}validateGetEntryPointAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_GET_ENTRY_POINT_ASYNC,i.H$.SESSION_GET_ENTRY_POINT_ASYNC)}}validateGetEntryPointData(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_GET_ENTRY_POINT_DATA,i.H$.SESSION_GET_ENTRY_POINT_DATA)}}validateGetTrafficSource(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_GET_TRAFFIC_SOURCE,i.H$.SESSION_GET_TRAFFIC_SOURCE)}}validateHappyTime(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_HAPPY_TIME,i.H$.SESSION_HAPPY_TIME)}}validateOnAudioStatusChange(e){return"function"!=typeof e?{valid:!1,error:(0,r.CH)(void 0,i.bo.SESSION_ON_AUDIO_STATUS_CHANGE,i.H$.SESSION_ON_AUDIO_STATUS_CHANGE)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_ON_AUDIO_STATUS_CHANGE,i.H$.SESSION_ON_AUDIO_STATUS_CHANGE)}}validateOnOrientationChange(e){return"function"!=typeof e?{valid:!1,error:(0,r.CH)(void 0,i.bo.SESSION_ON_ORIENTATION_CHANGE,i.H$.SESSION_ON_ORIENTATION_CHANGE)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_ON_ORIENTATION_CHANGE,i.H$.SESSION_ON_ORIENTATION_CHANGE)}}validateSetSessionData(e){return"object"!=typeof e?{valid:!1,error:(0,r.CH)(void 0,i.bo.SESSION_SET_SESSION_DATA,i.H$.SESSION_SET_SESSION_DATA)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_SET_SESSION_DATA,i.H$.SESSION_SET_SESSION_DATA)}}validateSwitchGameAsync(e,t){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_SWITCH_GAME_ASYNC,i.H$.SESSION_SWITCH_GAME_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.SESSION_SWITCH_GAME_ASYNC,i.H$.SESSION_SWITCH_GAME_ASYNC)}}validatenavigateToExternalUrl(e){return"string"!=typeof e?{valid:!1,error:(0,r.CH)(void 0,i.bo.SESSION_NAVIGATE_TO_EXTERNAL_URL,i.H$.SESSION_NAVIGATE_TO_EXTERNAL_URL)}:o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.SESSION_NAVIGATE_TO_EXTERNAL_URL,i.H$.SESSION_NAVIGATE_TO_EXTERNAL_URL)}}}},7006:(e,t,a)=>{a.d(t,{E:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{getStatsAsync(e,t){o.default._log.apiCall(i.bo.STATS_GET_STATS_ASYNC);const a=this.validateGetStats(e,t);return a.valid?(o.default._log.apiSuccess(i.bo.STATS_GET_STATS_ASYNC),this.getStatsAsyncImpl(e,t)):(o.default._log.apiError(i.bo.STATS_GET_STATS_ASYNC,a.error),Promise.reject(a.error))}postStatsAsync(e,t,a){o.default._log.apiCall(i.bo.STATS_POST_STATS_ASYNC);const r=this.validatePostStats(e,t,a);return r.valid?(o.default._log.apiSuccess(i.bo.STATS_POST_STATS_ASYNC),this.postStatsAsyncImpl(e,t,a)):(o.default._log.apiError(i.bo.STATS_POST_STATS_ASYNC,r.error),Promise.reject(r.error))}validateGetStats(e,t){return(0,l.Qh)(e)||(0,l.gf)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.STATS_GET_STATS_ASYNC,i.H$.STATS_GET_STATS_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.STATS_GET_STATS_ASYNC,i.H$.STATS_GET_STATS_ASYNC)}}validatePostStats(e,t,a){return((0,l.Qh)(e)||(0,l.gf)(e))&&(0,l.gf)(t)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.STATS_POST_STATS_ASYNC,i.H$.STATS_POST_STATS_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.STATS_POST_STATS_ASYNC,i.H$.STATS_POST_STATS_ASYNC)}}}},9150:(e,t,a)=>{a.d(t,{M:()=>r});var i=a(5894);class r{constructor(e,t,a,r,o){this._data={id:"",contextID:"",endTime:0},i.default._log.debug(`Creating tournament: ${e} / ${t} / ${a} / ${r} / ${o}`),this._data.id=e.toString(),this._data.contextID=t.toString(),this._data.endTime=a,this._data.title=r,"string"==typeof o&&(this._data.payload=JSON.parse(o))}get id(){return this._data.id}get contextID(){return this._data.contextID}get endTime(){return this._data.endTime}get title(){return this._data.title}get payload(){return this._data.payload}static mock(){return new r("123456789","987654321",1234567890,"Test Tournament",'{"foo": "bar"}')}}},1282:(e,t,a)=>{a.d(t,{Q:()=>n});var i=a(8119),r=a(6885),o=a(5894),l=a(3423);class n{createAsync(e){o.default._log.apiCall(i.bo.TOURNAMENT_CREATE_ASYNC);const t=this.validateCreateAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.TOURNAMENT_CREATE_ASYNC),this.createAsyncImpl(e)):(o.default._log.apiError(i.bo.TOURNAMENT_CREATE_ASYNC,t.error),Promise.reject(t.error))}getAllAsync(){o.default._log.apiCall(i.bo.TOURNAMENT_GET_ALL_ASYNC);const e=this.validateGetAllAsync();return e.valid?(o.default._log.apiSuccess(i.bo.TOURNAMENT_GET_ALL_ASYNC),this.getAllAsyncImpl()):(o.default._log.apiError(i.bo.TOURNAMENT_GET_ALL_ASYNC,e.error),Promise.reject(e.error))}getCurrentAsync(){o.default._log.apiCall(i.bo.TOURNAMENT_GET_CURRENT_ASYNC);const e=this.validateGetCurrentAsync();return e.valid?(o.default._log.apiSuccess(i.bo.TOURNAMENT_GET_CURRENT_ASYNC),this.getCurrentAsyncImpl()):(o.default._log.apiError(i.bo.TOURNAMENT_GET_CURRENT_ASYNC,e.error),Promise.reject(e.error))}joinAsync(e){o.default._log.apiCall(i.bo.TOURNAMENT_JOIN_ASYNC);const t=this.validateJoinAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.TOURNAMENT_JOIN_ASYNC),this.joinAsyncImpl(e)):(o.default._log.apiError(i.bo.TOURNAMENT_JOIN_ASYNC,t.error),Promise.reject(t.error))}postScoreAsync(e){o.default._log.apiCall(i.bo.TOURNAMENT_POST_SCORE_ASYNC);const t=this.validatePostScoreAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.TOURNAMENT_POST_SCORE_ASYNC),this.postScoreAsyncImpl(e)):(o.default._log.apiError(i.bo.TOURNAMENT_POST_SCORE_ASYNC,t.error),Promise.reject(t.error))}shareAsync(e){o.default._log.apiCall(i.bo.TOURNAMENT_SHARE_ASYNC);const t=this.validateShareAsync(e);return t.valid?(o.default._log.apiSuccess(i.bo.TOURNAMENT_SHARE_ASYNC),this.shareAsyncImpl(e)):(o.default._log.apiError(i.bo.TOURNAMENT_SHARE_ASYNC,t.error),Promise.reject(t.error))}validateCreateAsync(e){return(0,l.gf)(e.initialScore)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.TOURNAMENT_CREATE_ASYNC,i.H$.TOURNAMENT_CREATE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.TOURNAMENT_CREATE_ASYNC,i.H$.TOURNAMENT_CREATE_ASYNC)}}validateGetAllAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.TOURNAMENT_GET_ALL_ASYNC,i.H$.TOURNAMENT_GET_ALL_ASYNC)}}validateGetCurrentAsync(){return o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.TOURNAMENT_GET_CURRENT_ASYNC,i.H$.TOURNAMENT_GET_CURRENT_ASYNC)}}validateJoinAsync(e){return(0,l.Qh)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.TOURNAMENT_JOIN_ASYNC,i.H$.TOURNAMENT_JOIN_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.TOURNAMENT_JOIN_ASYNC,i.H$.TOURNAMENT_JOIN_ASYNC)}}validatePostScoreAsync(e){return(0,l.gf)(e)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.TOURNAMENT_POST_SCORE_ASYNC,i.H$.TOURNAMENT_POST_SCORE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.TOURNAMENT_POST_SCORE_ASYNC,i.H$.TOURNAMENT_POST_SCORE_ASYNC)}}validateShareAsync(e){return(0,l.gf)(e.score)?o.default.isInitialized?{valid:!0}:{valid:!1,error:(0,r.wL)(void 0,i.bo.TOURNAMENT_SHARE_ASYNC,i.H$.TOURNAMENT_SHARE_ASYNC)}:{valid:!1,error:(0,r.CH)(void 0,i.bo.TOURNAMENT_SHARE_ASYNC,i.H$.TOURNAMENT_SHARE_ASYNC)}}}},5957:(e,t,a)=>{a.d(t,{o:()=>c});var i=a(5894);const r="rmp";let o,l,n;const s={ajaxTimeout:5e3,creativeLoadTimeout:8e3,ajaxWithCredentials:!1,maxNumRedirects:4,labels:{skipMessage:"Skip ad",closeAd:"Close ad",textForInteractionUIOnMobile:"Play Now"},outstream:!1,showControlsForAdPlayer:!1,enableSimid:!0,enableVpaid:!0,vpaidSettings:{width:640,height:360,viewMode:"normal",desiredBitrate:500},useHlsJS:!0,debugHlsJS:!1,omidSupport:!0,omidAllowedVendors:[],omidRunValidationScript:!1,omidUnderEvaluation:!0,omidAutoplay:!1},d=function(e){const t=document.createElement("div");t.id="close-button",t.textContent="Ã—",o.appendChild(t),t.addEventListener("click",(function(){var t,a;"rewarded"==e.adType&&(null===(a=(t=e.callbacks).adViewed)||void 0===a||a.call(t)),e.callbacks.afterAd(),u(null),_()}))},_=function(){l.destroy();const e=document.getElementById(r);null==e||e.remove()},u=function(e){e&&clearInterval(e)},A=(e,t)=>{const a=i.default.session.getPlatform(),r="IOS"==i.default.session.getDevice();e.style.display="block",e.textContent=s.labels.textForInteractionUIOnMobile,"facebook"!=a||r?(e.href=t,e.target="_blank"):(e.href="#",e.addEventListener("click",(e=>{e.preventDefault();const a=(e=>{let t=null;const a=new URL(e).searchParams.get("oadest");a&&(t=new URL(a).searchParams.get("appid"));return t})(t);if(a)try{i.default.session.switchGameAsync(a)}catch(e){i.default._log.exception("Failed to switch game.",e)}})))},c=function(e,t,a=0){!function(){o=document.createElement("div"),o.classList.add("rmp-container"),o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.zIndex="99999",o.style.width="100vw",o.style.height="100vh",o.id=r,n=document.createElement("div"),n.id="countdown",o.appendChild(n);const e=document.createElement("div");e.classList.add("rmp-content"),o.appendChild(e);const t=document.createElement("video");t.classList.add("rmp-video"),t.setAttribute("playsinline",""),t.setAttribute("muted",""),t.setAttribute("webkit-playsinline",""),e.appendChild(t);const a=document.createElement("a");a.id="click-ad-button",o.appendChild(a);const i=document.createElement("div");i.classList.add("ad-controls"),o.appendChild(i);const l=document.createElement("button");l.classList.add("control-btn"),l.id="pauseResumeBtn",i.appendChild(l);const s=document.createElement("button");s.classList.add("control-btn"),s.id="muteUnmuteBtn",i.appendChild(s),document.body.appendChild(o);const d=document.createElement("style");d.textContent="\n        #countdown { \n            position: absolute; \n            top: 10px; \n            left: 10px; \n            z-index: 100000; \n            background: #000; \n            color: #fff; \n            padding: 10px; \n            cursor: pointer; \n            display: none; \n        }\n        #close-button {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            z-index: 100000;\n            background: #000;\n            color: #fff;\n            padding: 10px;\n            cursor: pointer;\n            border-radius: 50%;\n            width: 40px;\n            height: 40px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        #click-ad-button {\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            padding: 10px 20px;\n            background-color: #333;\n            color: #fff;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            z-index: 100000;\n            display: none;\n            text-decoration: none;\n        }\n        .rmp-ad-click-ui-mobile {\n            display: none !important;\n        }\n        .ad-controls {\n            position: absolute;\n            bottom: 10px;\n            left: 10px;\n            display: flex;\n            gap: 5px;\n        }\n        .control-btn {\n            background-color: rgba(128, 128, 128, 0.7); /* Gray background */\n            color: white; /* White icon */\n            border: none;\n            border-radius: 50%;\n            width: 40px;\n            height: 40px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 20px;\n            cursor: pointer;\n            outline: none;\n        }\n        .control-btn:hover {\n            background-color: rgba(64, 64, 64, 0.9); /* Darker gray on hover */\n        }\n    ",document.head.appendChild(d)}(),l=new window.RmpVast(r,s),i.default._log.debug("rmpVast instance created");let u,c=`https://servedby.aqua-adserver.com/fc.php?script=apVideo:vast2&zoneid=${e}`;a&&(c=`${c}&skipoffset=${a}`),l.loadAds(c);const S=document.getElementById("pauseResumeBtn"),E=document.getElementById("muteUnmuteBtn");let C=!1,I=!1;l.on("adstarted",(function(){C=l.adPaused,S&&(S.textContent=C?"â–¶ï¸":"â¸"),I=l.muted,E&&(E.textContent=I?"ðŸ”‡":"ðŸ”Š"),t.callbacks.beforeAd(),n.style.display="block",u=setInterval((()=>{let e=l.adRemainingTime/1e3;e<=0?clearInterval(u):(e-=1,"rewarded"==t.adType?n.innerHTML=`Claim reward in: ${Math.ceil(e)}s`:n.innerHTML=`Ad ends in: ${Math.ceil(e)}s`)}),1e3),l.currentAdPlayer.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()}),!0);const e=l.clickThroughUrl;if(e){const t=document.getElementById("click-ad-button");t?A(t,e):i.default._log.exception("Element with ID 'click-ad-button' not found.")}})),null==S||S.addEventListener("click",(function(){C?l.play():l.pause()})),null==E||E.addEventListener("click",(function(){l.muted=!I})),l.on("adpaused",(function(){C=!0,S&&(S.textContent="â–¶ï¸")})),l.on("adresumed",(function(){C=!1,S&&(S.textContent="â¸")})),l.on("advolumemuted",(function(){I=!0,E&&(E.textContent="ðŸ”‡")})),l.on("advolumeunmuted",(function(){I=!1,E&&(E.textContent="ðŸ”Š")})),l.on("adcomplete",(function(){n.style.display="none",u&&clearInterval(u),d(t)})),l.on("adskipped",(function(){var e,a;t.callbacks.afterAd(),"rewarded"==t.adType&&(null===(a=(e=t.callbacks).adDismissed)||void 0===a||a.call(e),i.default.analytics._logAdCall("rewarded",t.placementType,!0,!1)),u&&clearInterval(u),_()})),l.on("aderror",(function(){var e,a;t.callbacks.noFill(),null===(a=(e=t.callbacks).adDismissed)||void 0===a||a.call(e),u&&clearInterval(u),_(),i.default.analytics._logAdCall(t.adType,t.placementType,!1)}))}}}]);